"use strict";(globalThis.webpackChunkmy_tutorial_site=globalThis.webpackChunkmy_tutorial_site||[]).push([[2143],{1131:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>i});const n=JSON.parse('{"id":"\u5176\u4ed6/playwright/intro11","title":"\ud83d\udc9cpage.on()","description":"---","source":"@site/docs/\u5176\u4ed6/playwright/11.on.md","sourceDirName":"\u5176\u4ed6/playwright","slug":"/\u5176\u4ed6/playwright/intro11","permalink":"/saodoc2/docs/\u5176\u4ed6/playwright/intro11","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"id":"intro11","permalink":"/pw/intro11","title":"\ud83d\udc9cpage.on()"},"sidebar":"otherSidebar","previous":{"title":"\ud83d\udc9c\u7f51\u7edc\u529f\u80fd","permalink":"/saodoc2/docs/\u5176\u4ed6/playwright/intro10"},"next":{"title":"\ud83d\udc9c12.Route","permalink":"/saodoc2/docs/\u5176\u4ed6/playwright/intro12"}}');var s=r(4848),c=r(8453);const d={id:"intro11",permalink:"/pw/intro11",title:"\ud83d\udc9cpage.on()"},a=void 0,l={},i=[{value:"Playwright Page \u7684\u4e8b\u4ef6\uff08v1.52 \u53ef\u80fd\u652f\u6301\u7684\uff09",id:"playwright-page-\u7684\u4e8b\u4ef6v152-\u53ef\u80fd\u652f\u6301\u7684",level:2},{value:"\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u793a\u4f8b\u4ee3\u7801",id:"\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u793a\u4f8b\u4ee3\u7801",level:2}];function o(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"playwright-page-\u7684\u4e8b\u4ef6v152-\u53ef\u80fd\u652f\u6301\u7684",children:"Playwright Page \u7684\u4e8b\u4ef6\uff08v1.52 \u53ef\u80fd\u652f\u6301\u7684\uff09"}),"\n",(0,s.jsxs)(t.p,{children:["\u4ee5\u4e0b\u662f ",(0,s.jsx)(t.code,{children:"page.on(...)"})," \u901a\u5e38\u80fd\u76d1\u542c\u7684\u4e00\u4e9b\u4e8b\u4ef6\uff1a"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u4e8b\u4ef6\u540d"}),(0,s.jsx)(t.th,{children:"\u4e8b\u4ef6\u53c2\u6570\u7c7b\u578b / \u56de\u8c03\u6536\u5230\u7684\u5bf9\u8c61"}),(0,s.jsx)(t.th,{children:"\u89e6\u53d1\u65f6\u673a / \u8bf4\u660e"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"close"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Page"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u88ab\u5173\u95ed\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"console"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ConsoleMessage"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u5185\u90e8\u6709 ",(0,s.jsx)(t.code,{children:"console.log"})," / ",(0,s.jsx)(t.code,{children:"console.error"})," / ",(0,s.jsx)(t.code,{children:"console.warn"})," \u7b49\u88ab\u8c03\u7528\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"crash"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsxs)(t.td,{children:["\u9875\u9762\u8fdb\u7a0b\u5d29\u6e83\uff08crash\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"dialog"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Dialog"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u5f39\u51fa\u5bf9\u8bdd\u6846\uff08",(0,s.jsx)(t.code,{children:"alert"})," / ",(0,s.jsx)(t.code,{children:"prompt"})," / ",(0,s.jsx)(t.code,{children:"confirm"})," / ",(0,s.jsx)(t.code,{children:"beforeunload"}),"\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"filechooser"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"FileChooser"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u5c1d\u8bd5\u4f7f\u7528\u6587\u4ef6\u4e0a\u4f20\uff08\u4f8b\u5982\u70b9\u51fb ",(0,s.jsx)(t.code,{children:'<input type="file">'}),"\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"frameattached"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Frame"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u67d0\u4e2a\u5b50 frame \u88ab\u9644\u52a0\uff08\u63d2\u5165\uff09\u5230\u9875\u9762\u4e2d\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"framedetached"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Frame"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u67d0\u4e2a\u5b50 frame \u4ece\u9875\u9762\u4e2d\u79fb\u9664\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page - Playwright",children:"Playwright \u4e2d\u6587\u7f51"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"framenavigated"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Frame"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u5df2\u6709\u7684 frame \u5bfc\u822a\u5230\u65b0\u7684 URL\uff08\u6216\u91cd\u8f7d\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page - Playwright",children:"Playwright \u4e2d\u6587\u7f51"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"load"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsxs)(t.td,{children:["\u5f53\u6d4f\u89c8\u5668\u89e6\u53d1 ",(0,s.jsx)(t.code,{children:"window.load"})," \u4e8b\u4ef6\uff08\u6240\u6709\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"domcontentloaded"})}),(0,s.jsx)(t.td,{children:"\u2014"}),(0,s.jsxs)(t.td,{children:["\u5f53 DOMContentLoaded \u4e8b\u4ef6\u89e6\u53d1\u65f6\uff08\u6587\u6863\u57fa\u672c\u7ed3\u6784\u89e3\u6790\u5b8c\u6210\uff09\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"pageerror"})}),(0,s.jsx)(t.td,{children:"\u9519\u8bef\u5bf9\u8c61 / JavaScript \u5f02\u5e38"}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u5185\u90e8 JavaScript \u629b\u51fa\u672a\u6355\u83b7\u5f02\u5e38\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page - Playwright",children:"Playwright \u4e2d\u6587\u7f51"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"popup"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Page"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u6253\u5f00\u65b0\u7684\u5b50\u9875\u9762 / \u5f39\u51fa\u7a97\u53e3\uff08",(0,s.jsx)(t.code,{children:"window.open"})," \u7b49\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page - Playwright",children:"Playwright \u4e2d\u6587\u7f51"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"request"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Request"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u53d1\u8d77\u7f51\u7edc\u8bf7\u6c42\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"response"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Response"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u67d0\u4e2a\u8bf7\u6c42\u6536\u5230\u54cd\u5e94\u5934 / \u72b6\u6001\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com",title:"Request | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"requestfinished"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Request"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u8bf7\u6c42\u5b8c\u6210\uff08\u5305\u62ec\u54cd\u5e94\u4f53\u4e0b\u8f7d\u5b8c\u6bd5\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com",title:"Request | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"requestfailed"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Request"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u8bf7\u6c42\u5728\u4e2d\u95f4\u67d0\u73af\u8282\u5931\u8d25\uff08\u7f51\u7edc\u9519\u8bef\u3001\u8d85\u65f6\u7b49\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com",title:"Request | Playwright Python",children:"Playwright"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"websocket"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"WebSocket"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u53d1\u8d77 WebSocket \u8bf7\u6c42 / \u8fde\u63a5\u65f6\u89e6\u53d1\uff08\u5982\u679c\u9875\u9762\u4f7f\u7528 WebSocket\uff09 (",(0,s.jsx)(t.a,{href:"https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page - Playwright",children:"Playwright \u4e2d\u6587\u7f51"}),")"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"worker"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Worker"})}),(0,s.jsxs)(t.td,{children:["\u5f53\u9875\u9762\u521b\u5efa\u65b0\u7684\u4e13\u7528 Web Worker \uff08Dedicated Worker\uff09\u65f6\u89e6\u53d1 (",(0,s.jsx)(t.a,{href:"https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com",title:"Page - Playwright",children:"Playwright \u4e2d\u6587\u7f51"}),")"]})]})]})]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["\u2705 \u6ce8\u610f\uff1a\u8fd9\u4e9b\u662f ",(0,s.jsx)(t.code,{children:"Page"})," \u5bf9\u8c61\u5e38\u89c1\u652f\u6301\u7684\u4e8b\u4ef6\uff0c\u4e0d\u6392\u9664\u67d0\u4e9b\u4e8b\u4ef6\u5728 1.52 \u7248\u672c\u4e2d\u5c1a\u672a\u5f15\u5165\u6216\u5df2\u505a\u517c\u5bb9\u6027\u53d8\u52a8\u3002\u5efa\u8bae\u5728\u4f60\u5b89\u88c5\u7684\u7248\u672c\u4e0a\u901a\u8fc7 ",(0,s.jsx)(t.code,{children:"help(Page)"})," \u6216\u9605\u8bfb\u5bf9\u5e94\u7248\u672c\u6587\u6863\u786e\u8ba4\u3002"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u793a\u4f8b\u4ee3\u7801",children:"\u6bcf\u4e2a\u4e8b\u4ef6\u7684\u793a\u4f8b\u4ee3\u7801"}),"\n",(0,s.jsxs)(t.p,{children:["\u4e0b\u9762\u662f\u8fd9\u4e9b\u4e8b\u4ef6\u7684\u4f7f\u7528\u793a\u4f8b\uff08\u4ee5\u540c\u6b65 API \u4e3a\u4f8b\uff0c\u5f02\u6b65 API \u7528\u6cd5\u7c7b\u4f3c\u4f46\u52a0 ",(0,s.jsx)(t.code,{children:"await"}),"\uff09\uff1a"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from playwright.sync_api import sync_playwright\n\ndef demo():\n    with sync_playwright() as p:\n        browser = p.chromium.launch(headless=False)\n        context = browser.new_context(accept_downloads=True)  # \u5bf9\u4e8e download \u4e8b\u4ef6\u53ef\u80fd\u9700\u8981 accept_downloads=True\n        page = context.new_page()\n\n        # close\n        page.on("close", lambda pg: print("\u9875\u9762\u88ab\u5173\u95ed"))\n\n        # console\n        def on_console(msg):\n            print(f"Console: type={msg.type}, text={msg.text}")\n        page.on("console", on_console)\n\n        # crash\n        page.on("crash", lambda: print("\u9875\u9762\u5d29\u6e83"))\n\n        # dialog\n        def on_dialog(dialog):\n            print(f"Dialog: {dialog.message}")\n            dialog.accept()  # \u6216 dismiss()\n        page.on("dialog", on_dialog)\n\n        # filechooser\n        page.on("filechooser", lambda fc: fc.set_files(["/path/to/file.txt"]))\n\n        # frameattached / framedetached / framenavigated\n        page.on("frameattached", lambda fr: print("frame \u9644\u52a0:", fr.url))\n        page.on("framedetached", lambda fr: print("frame \u5206\u79bb:", fr.url))\n        page.on("framenavigated", lambda fr: print("frame \u5bfc\u822a\u81f3:", fr.url))\n\n        # load & domcontentloaded\n        page.on("load", lambda: print("\u9875\u9762\u5b8c\u5168\u52a0\u8f7d(load)"))\n        page.on("domcontentloaded", lambda: print("DOMContentLoaded \u89e6\u53d1"))\n\n        # pageerror\n        page.on("pageerror", lambda err: print("\u9875\u9762 JS \u9519\u8bef:", err))\n\n        # popup\n        page.on("popup", lambda new_page: print("\u5f39\u51fa\u7a97\u53e3\u6253\u5f00:", new_page.url))\n\n        # \u8bf7\u6c42 / \u54cd\u5e94 / \u5b8c\u6210 / \u5931\u8d25\n        page.on("request", lambda req: print("\u53d1\u8d77\u8bf7\u6c42:", req.method, req.url))\n        page.on("response", lambda resp: print("\u6536\u5230\u54cd\u5e94:", resp.status, resp.url))\n        page.on("requestfinished", lambda req: print("\u8bf7\u6c42\u5b8c\u6210:", req.url))\n        page.on("requestfailed", lambda req: print("\u8bf7\u6c42\u5931\u8d25:", req.url, req.failure))\n\n        # websocket\n        page.on("websocket", lambda ws: print("WebSocket \u6253\u5f00:", ws.url))\n\n        # worker\n        page.on("worker", lambda w: print("Worker \u542f\u52a8:", w.url))\n\n        # \u8bbf\u95ee\u4e00\u4e2a\u6d4b\u8bd5\u9875\u9762\n        page.goto("https://example.com")\n\n        # \u4e3a\u6f14\u793a\uff0c\u89e6\u53d1\u4e00\u4e2a popup\n        page.evaluate("window.open(\'https://example.org\', \'_blank\')")\n\n        # \u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u4ee5\u4fbf\u89c2\u5bdf\u8f93\u51fa\n        page.wait_for_timeout(3000)\n\n        browser.close()\n\nif __name__ == "__main__":\n    demo()\n'})}),"\n",(0,s.jsxs)(t.p,{children:["\u5728\u5f02\u6b65\u7248\uff08",(0,s.jsx)(t.code,{children:"async_playwright"}),"\uff09\u4e2d\uff0c\u4f60\u53ef\u4ee5\u628a ",(0,s.jsx)(t.code,{children:"page.on(...)"})," \u653e\u5728 ",(0,s.jsx)(t.code,{children:"await context.new_page()"})," \u4e4b\u540e\uff0c\u7528 ",(0,s.jsx)(t.code,{children:"async"})," \u56de\u8c03\u6216\u666e\u901a\u51fd\u6570\u90fd\u53ef\u4ee5\uff08Playwright \u4f1a\u81ea\u52a8\u5904\u7406\u56de\u8c03\u662f\u534f\u7a0b\u8fd8\u662f\u666e\u901a\u51fd\u6570\uff09\u3002"]}),"\n",(0,s.jsx)(t.hr,{})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>d,x:()=>a});var n=r(6540);const s={},c=n.createContext(s);function d(e){const t=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);