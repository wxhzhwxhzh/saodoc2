"use strict";(globalThis.webpackChunkmy_tutorial_site=globalThis.webpackChunkmy_tutorial_site||[]).push([[9536],{737:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"\u5176\u4ed6/cdp/intro4","title":"\ud83d\udfe0Target","description":"","source":"@site/docs/\u5176\u4ed6/cdp/4.target.md","sourceDirName":"\u5176\u4ed6/cdp","slug":"/\u5176\u4ed6/cdp/intro4","permalink":"/saodoc2/docs/\u5176\u4ed6/cdp/intro4","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"intro4","permalink":"/cdp/p4","title":"\ud83d\udfe0Target"},"sidebar":"otherSidebar","previous":{"title":"\ud83d\udfe0Page \u6559\u7a0b","permalink":"/saodoc2/docs/\u5176\u4ed6/cdp/intro3"},"next":{"title":"\ud83d\udfe0Runtime","permalink":"/saodoc2/docs/\u5176\u4ed6/cdp/intro5"}}');var a=t(4848),s=t(8453);const i={id:"intro4",permalink:"/cdp/p4",title:"\ud83d\udfe0Target"},o="\ud83d\udfe0Target\u6559\u7a0b",g={},d=[];function _(e){const n={code:"code",h1:"h1",header:"header",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"target\u6559\u7a0b",children:"\ud83d\udfe0Target\u6559\u7a0b"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'  import json\nimport websocket\nimport requests\nimport time\nimport threading\nfrom datetime import datetime\n\ndef get_websocket_url(port=9222):\n    """\u83b7\u53d6\u4e3b\u6d4f\u89c8\u5668 WebSocket \u8c03\u8bd5 URL"""\n    response = requests.get(f\'http://localhost:{port}/json\')\n    tabs = response.json()\n    return tabs[0][\'webSocketDebuggerUrl\']\n\ndef get_browser_websocket_url(port=9222):\n    """\u83b7\u53d6\u6d4f\u89c8\u5668\u7ea7\u522b\u7684 WebSocket URL"""\n    response = requests.get(f\'http://localhost:{port}/json/version\')\n    version_info = response.json()\n    return version_info[\'webSocketDebuggerUrl\']\n\nclass CDPTarget:\n    """CDP Target \u5c01\u88c5\u7c7b"""\n    \n    def __init__(self, ws_url):\n        self.ws = websocket.create_connection(ws_url)\n        self.command_id = 0\n        self.event_handlers = {}\n        self.running = True\n        self.events_log = []\n        self.targets = {}  # \u5b58\u50a8\u6240\u6709 target \u4fe1\u606f\n        \n        # \u542f\u52a8\u4e8b\u4ef6\u76d1\u542c\u7ebf\u7a0b\n        self.event_thread = threading.Thread(target=self._event_listener, daemon=True)\n        self.event_thread.start()\n        \n    def send_command(self, method, params=None):\n        """\u53d1\u9001 CDP \u547d\u4ee4"""\n        self.command_id += 1\n        command = {\n            "id": self.command_id,\n            "method": method,\n            "params": params or {}\n        }\n        print(f"\\n>>> \u53d1\u9001\u547d\u4ee4: {method}")\n        if params:\n            # \u622a\u65ad\u8fc7\u957f\u7684\u53c2\u6570\u663e\u793a\n            params_str = json.dumps(params, indent=6, ensure_ascii=False)\n            if len(params_str) > 300:\n                params_str = params_str[:300] + "..."\n            print(f"    \u53c2\u6570: {params_str}")\n        \n        self.ws.send(json.dumps(command))\n        \n        # \u7b49\u5f85\u54cd\u5e94\n        while True:\n            try:\n                response = json.loads(self.ws.recv())\n                if \'id\' in response and response[\'id\'] == self.command_id:\n                    if \'error\' not in response:\n                        print(f"<<< \u54cd\u5e94\u6210\u529f")\n                        if \'result\' in response and response[\'result\']:\n                            result_str = json.dumps(response[\'result\'], indent=6, ensure_ascii=False)\n                            if len(result_str) > 300:\n                                result_str = result_str[:300] + "..."\n                            print(f"    \u7ed3\u679c: {result_str}")\n                    else:\n                        print(f"<<< \u9519\u8bef: {response[\'error\']}")\n                    return response\n                elif \'method\' in response:\n                    self._handle_event(response)\n            except Exception as e:\n                print(f"    \u26a0\ufe0f \u63a5\u6536\u54cd\u5e94\u51fa\u9519: {e}")\n                return {"error": str(e)}\n    \n    def _event_listener(self):\n        """\u540e\u53f0\u76d1\u542c\u4e8b\u4ef6"""\n        while self.running:\n            try:\n                self.ws.settimeout(0.1)\n                message = self.ws.recv()\n                data = json.loads(message)\n                if \'method\' in data:\n                    self._handle_event(data)\n            except:\n                continue\n    \n    def _handle_event(self, event):\n        """\u5904\u7406\u4e8b\u4ef6"""\n        method = event[\'method\']\n        self.events_log.append({\n            \'timestamp\': datetime.now().isoformat(),\n            \'method\': method,\n            \'params\': event.get(\'params\', {})\n        })\n        \n        if method in self.event_handlers:\n            self.event_handlers[method](event)\n    \n    def on_event(self, event_name, handler):\n        """\u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668"""\n        self.event_handlers[event_name] = handler\n    \n    def wait_for_event(self, event_name, timeout=10):\n        """\u7b49\u5f85\u7279\u5b9a\u4e8b\u4ef6"""\n        start_time = time.time()\n        while time.time() - start_time < timeout:\n            for event in reversed(self.events_log):\n                if event[\'method\'] == event_name:\n                    return event\n            time.sleep(0.1)\n        return None\n    \n    def close(self):\n        self.running = False\n        time.sleep(0.2)\n        self.ws.close()\n\n\n# ========================================\n# \u793a\u4f8b 1: \u57fa\u7840 Target \u53d1\u73b0\u548c\u4fe1\u606f\u83b7\u53d6\n# ========================================\ndef example_target_discovery():\n    """\n    \u6f14\u793a Target \u53d1\u73b0:\n    1. Target.setDiscoverTargets - \u542f\u7528 target \u53d1\u73b0\n    2. Target.getTargets - \u83b7\u53d6\u6240\u6709 targets\n    3. Target.getTargetInfo - \u83b7\u53d6\u5355\u4e2a target \u4fe1\u606f\n    4. Target.targetCreated - target \u521b\u5efa\u4e8b\u4ef6\n    5. Target.targetDestroyed - target \u9500\u6bc1\u4e8b\u4ef6\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 1: Target \u53d1\u73b0\u548c\u4fe1\u606f\u83b7\u53d6")\n    print("="*60)\n    \n    # \u4f7f\u7528\u6d4f\u89c8\u5668\u7ea7\u522b\u7684\u8fde\u63a5\n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    created_count = [0]\n    destroyed_count = [0]\n    \n    def handle_target_created(event):\n        created_count[0] += 1\n        info = event[\'params\'][\'targetInfo\']\n        print(f"\\n\ud83c\udd95 Target \u521b\u5efa #{created_count[0]}:")\n        print(f"    ID: {info.get(\'targetId\', \'N/A\')[:40]}...")\n        print(f"    \u7c7b\u578b: {info.get(\'type\', \'N/A\')}")\n        print(f"    URL: {info.get(\'url\', \'N/A\')[:80]}")\n        print(f"    \u6807\u9898: {info.get(\'title\', \'N/A\')[:50]}")\n    \n    def handle_target_destroyed(event):\n        destroyed_count[0] += 1\n        target_id = event[\'params\'][\'targetId\']\n        print(f"\\n\u274c Target \u9500\u6bc1 #{destroyed_count[0]}: {target_id[:40]}...")\n    \n    def handle_target_info_changed(event):\n        info = event[\'params\'][\'targetInfo\']\n        print(f"\\n\ud83d\udd04 Target \u4fe1\u606f\u53d8\u5316:")\n        print(f"    ID: {info.get(\'targetId\', \'N/A\')[:40]}...")\n        print(f"    URL: {info.get(\'url\', \'N/A\')[:80]}")\n    \n    # \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668\n    target.on_event("Target.targetCreated", handle_target_created)\n    target.on_event("Target.targetDestroyed", handle_target_destroyed)\n    target.on_event("Target.targetInfoChanged", handle_target_info_changed)\n    \n    # 1. \u542f\u7528 target \u53d1\u73b0\n    print("\\n--- \u542f\u7528 Target \u53d1\u73b0 ---")\n    target.send_command("Target.setDiscoverTargets", {\n        "discover": True\n    })\n    \n    time.sleep(2)\n    \n    # 2. \u83b7\u53d6\u6240\u6709 targets\n    print("\\n--- \u83b7\u53d6\u6240\u6709 Targets ---")\n    result = target.send_command("Target.getTargets")\n    \n    if \'result\' in result and \'targetInfos\' in result[\'result\']:\n        targets = result[\'result\'][\'targetInfos\']\n        print(f"\\n\ud83d\udcca \u5f53\u524d\u6d3b\u8dc3\u7684 Targets (\u5171 {len(targets)} \u4e2a):")\n        \n        for i, info in enumerate(targets, 1):\n            print(f"\\n  {i}. Target:")\n            print(f"     ID: {info.get(\'targetId\', \'N/A\')[:40]}...")\n            print(f"     \u7c7b\u578b: {info.get(\'type\', \'N/A\')}")\n            print(f"     URL: {info.get(\'url\', \'N/A\')[:80]}")\n            print(f"     \u6807\u9898: {info.get(\'title\', \'N/A\')[:50]}")\n            print(f"     \u5df2\u9644\u52a0: {info.get(\'attached\', False)}")\n    \n    # 3. \u521b\u5efa\u65b0\u6807\u7b7e\u9875\u89e6\u53d1\u4e8b\u4ef6\n    print("\\n--- \u521b\u5efa\u65b0\u6807\u7b7e\u9875 ---")\n    new_target = target.send_command("Target.createTarget", {\n        "url": "https://example.com"\n    })\n    \n    time.sleep(3)\n    \n    # 4. \u5173\u95ed\u65b0\u521b\u5efa\u7684\u6807\u7b7e\u9875\n    if \'result\' in new_target and \'targetId\' in new_target[\'result\']:\n        target_id = new_target[\'result\'][\'targetId\']\n        print(f"\\n--- \u5173\u95ed\u6807\u7b7e\u9875 {target_id[:40]}... ---")\n        target.send_command("Target.closeTarget", {\n            "targetId": target_id\n        })\n    \n    time.sleep(2)\n    \n    print(f"\\n\ud83d\udcca \u7edf\u8ba1: \u521b\u5efa {created_count[0]} \u4e2a, \u9500\u6bc1 {destroyed_count[0]} \u4e2a")\n    \n    target.close()\n\n\n# ========================================\n# \u793a\u4f8b 2: \u521b\u5efa\u548c\u7ba1\u7406 Targets\n# ========================================\ndef example_create_and_manage_targets():\n    """\n    \u6f14\u793a\u521b\u5efa\u548c\u7ba1\u7406 targets:\n    1. Target.createTarget - \u521b\u5efa\u65b0\u6807\u7b7e\u9875\n    2. Target.closeTarget - \u5173\u95ed\u6807\u7b7e\u9875\n    3. Target.activateTarget - \u6fc0\u6d3b\u6807\u7b7e\u9875\n    4. Target.createBrowserContext - \u521b\u5efa\u9694\u79bb\u4e0a\u4e0b\u6587\n    5. Target.disposeBrowserContext - \u9500\u6bc1\u4e0a\u4e0b\u6587\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 2: \u521b\u5efa\u548c\u7ba1\u7406 Targets")\n    print("="*60)\n    \n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    target.send_command("Target.setDiscoverTargets", {"discover": True})\n    time.sleep(1)\n    \n    # 1. \u521b\u5efa\u666e\u901a\u6807\u7b7e\u9875\n    print("\\n--- \u521b\u5efa\u666e\u901a\u6807\u7b7e\u9875 ---")\n    tab1 = target.send_command("Target.createTarget", {\n        "url": "https://www.google.com",\n        "width": 1024,\n        "height": 768,\n        "enableBeginFrameControl": False\n    })\n    \n    tab1_id = tab1[\'result\'][\'targetId\'] if \'result\' in tab1 else None\n    print(f"    \u521b\u5efa\u7684 Target ID: {tab1_id[:40] if tab1_id else \'N/A\'}...")\n    time.sleep(2)\n    \n    # 2. \u521b\u5efa\u9694\u79bb\u7684\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\n    print("\\n--- \u521b\u5efa\u9694\u79bb\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587 ---")\n    context = target.send_command("Target.createBrowserContext", {\n        "disposeOnDetach": True,  # \u65ad\u5f00\u8fde\u63a5\u65f6\u81ea\u52a8\u9500\u6bc1\n        "proxyServer": "",         # \u53ef\u9009\uff1a\u8bbe\u7f6e\u4ee3\u7406\n        "proxyBypassList": ""      # \u53ef\u9009\uff1a\u4ee3\u7406\u7ed5\u8fc7\u5217\u8868\n    })\n    \n    context_id = context[\'result\'][\'browserContextId\'] if \'result\' in context else None\n    print(f"    \u4e0a\u4e0b\u6587 ID: {context_id[:40] if context_id else \'N/A\'}...")\n    \n    # 3. \u5728\u9694\u79bb\u4e0a\u4e0b\u6587\u4e2d\u521b\u5efa\u6807\u7b7e\u9875\n    if context_id:\n        print("\\n--- \u5728\u9694\u79bb\u4e0a\u4e0b\u6587\u4e2d\u521b\u5efa\u6807\u7b7e\u9875 ---")\n        tab2 = target.send_command("Target.createTarget", {\n            "url": "https://www.wikipedia.org",\n            "browserContextId": context_id\n        })\n        \n        tab2_id = tab2[\'result\'][\'targetId\'] if \'result\' in tab2 else None\n        print(f"    \u521b\u5efa\u7684 Target ID: {tab2_id[:40] if tab2_id else \'N/A\'}...")\n        time.sleep(2)\n    \n    # 4. \u6fc0\u6d3b\u7b2c\u4e00\u4e2a\u6807\u7b7e\u9875\n    if tab1_id:\n        print("\\n--- \u6fc0\u6d3b\u7b2c\u4e00\u4e2a\u6807\u7b7e\u9875 ---")\n        target.send_command("Target.activateTarget", {\n            "targetId": tab1_id\n        })\n        time.sleep(1)\n    \n    # 5. \u83b7\u53d6\u5f53\u524d\u6240\u6709 targets\n    print("\\n--- \u5f53\u524d\u6240\u6709 Targets ---")\n    all_targets = target.send_command("Target.getTargets")\n    if \'result\' in all_targets:\n        print(f"    \u603b\u6570: {len(all_targets[\'result\'][\'targetInfos\'])}")\n    \n    # 6. \u5173\u95ed\u521b\u5efa\u7684\u6807\u7b7e\u9875\n    print("\\n--- \u6e05\u7406: \u5173\u95ed\u521b\u5efa\u7684\u6807\u7b7e\u9875 ---")\n    if tab1_id:\n        target.send_command("Target.closeTarget", {"targetId": tab1_id})\n        print(f"    \u5df2\u5173\u95ed: {tab1_id[:40]}...")\n    \n    # 7. \u9500\u6bc1\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\uff08\u4f1a\u81ea\u52a8\u5173\u95ed\u5176\u4e2d\u7684\u6240\u6709\u6807\u7b7e\u9875\uff09\n    if context_id:\n        print("\\n--- \u9500\u6bc1\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587 ---")\n        target.send_command("Target.disposeBrowserContext", {\n            "browserContextId": context_id\n        })\n        print(f"    \u5df2\u9500\u6bc1\u4e0a\u4e0b\u6587: {context_id[:40]}...")\n    \n    time.sleep(2)\n    target.close()\n\n\n# ========================================\n# \u793a\u4f8b 3: \u9644\u52a0\u5230 Target \u5e76\u63a7\u5236\n# ========================================\ndef example_attach_and_control():\n    """\n    \u6f14\u793a\u9644\u52a0\u5230 target \u5e76\u63a7\u5236:\n    1. Target.attachToTarget - \u9644\u52a0\u5230 target\n    2. Target.detachFromTarget - \u4ece target \u5206\u79bb\n    3. Target.sendMessageToTarget - \u5411 target \u53d1\u9001\u6d88\u606f\n    4. Target.setAutoAttach - \u81ea\u52a8\u9644\u52a0\u8bbe\u7f6e\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 3: \u9644\u52a0\u5230 Target \u5e76\u63a7\u5236")\n    print("="*60)\n    \n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    session_ids = {}\n    \n    def handle_attached_to_target(event):\n        params = event[\'params\']\n        session_id = params.get(\'sessionId\')\n        target_info = params.get(\'targetInfo\', {})\n        \n        print(f"\\n\u2705 \u5df2\u9644\u52a0\u5230 Target:")\n        print(f"    Session ID: {session_id[:40]}...")\n        print(f"    Target ID: {target_info.get(\'targetId\', \'N/A\')[:40]}...")\n        print(f"    \u7c7b\u578b: {target_info.get(\'type\', \'N/A\')}")\n        \n        session_ids[target_info.get(\'targetId\')] = session_id\n    \n    def handle_detached_from_target(event):\n        session_id = event[\'params\'].get(\'sessionId\')\n        print(f"\\n\u274c \u5df2\u4ece Target \u5206\u79bb: {session_id[:40]}...")\n    \n    def handle_received_message(event):\n        params = event[\'params\']\n        session_id = params.get(\'sessionId\', \'\')[:20]\n        message = json.loads(params.get(\'message\', \'{}\'))\n        method = message.get(\'method\', \'N/A\')\n        \n        # \u53ea\u663e\u793a\u91cd\u8981\u6d88\u606f\n        if method in [\'Page.loadEventFired\', \'Runtime.executionContextCreated\']:\n            print(f"\\n\ud83d\udce8 \u6536\u5230\u6d88\u606f [Session: {session_id}...]: {method}")\n    \n    target.on_event("Target.attachedToTarget", handle_attached_to_target)\n    target.on_event("Target.detachedFromTarget", handle_detached_from_target)\n    target.on_event("Target.receivedMessageFromTarget", handle_received_message)\n    \n    target.send_command("Target.setDiscoverTargets", {"discover": True})\n    \n    # 1. \u8bbe\u7f6e\u81ea\u52a8\u9644\u52a0\u5230\u65b0 targets\n    print("\\n--- \u8bbe\u7f6e\u81ea\u52a8\u9644\u52a0 ---")\n    target.send_command("Target.setAutoAttach", {\n        "autoAttach": True,\n        "waitForDebuggerOnStart": False,\n        "flatten": True  # \u6241\u5e73\u5316\uff0c\u5305\u62ec iframe \u7b49\n    })\n    \n    time.sleep(1)\n    \n    # 2. \u521b\u5efa\u65b0\u6807\u7b7e\u9875\uff08\u4f1a\u81ea\u52a8\u9644\u52a0\uff09\n    print("\\n--- \u521b\u5efa\u65b0\u6807\u7b7e\u9875\uff08\u81ea\u52a8\u9644\u52a0\uff09---")\n    new_tab = target.send_command("Target.createTarget", {\n        "url": "https://example.com"\n    })\n    \n    tab_id = new_tab[\'result\'][\'targetId\'] if \'result\' in new_tab else None\n    time.sleep(3)\n    \n    # 3. \u901a\u8fc7 session \u5411 target \u53d1\u9001\u547d\u4ee4\n    if tab_id and tab_id in session_ids:\n        session_id = session_ids[tab_id]\n        \n        print(f"\\n--- \u5411 Target \u53d1\u9001\u547d\u4ee4 ---")\n        print(f"    Session ID: {session_id[:40]}...")\n        \n        # \u542f\u7528 Page \u57df\n        message = {\n            "id": 1,\n            "method": "Page.enable",\n            "params": {}\n        }\n        \n        target.send_command("Target.sendMessageToTarget", {\n            "sessionId": session_id,\n            "message": json.dumps(message)\n        })\n        \n        time.sleep(1)\n        \n        # \u5bfc\u822a\u5230\u65b0 URL\n        message = {\n            "id": 2,\n            "method": "Page.navigate",\n            "params": {"url": "https://www.wikipedia.org"}\n        }\n        \n        target.send_command("Target.sendMessageToTarget", {\n            "sessionId": session_id,\n            "message": json.dumps(message)\n        })\n        \n        time.sleep(3)\n        \n        # 4. \u624b\u52a8\u4ece target \u5206\u79bb\n        print(f"\\n--- \u624b\u52a8\u5206\u79bb ---")\n        target.send_command("Target.detachFromTarget", {\n            "sessionId": session_id\n        })\n    \n    # 5. \u6e05\u7406\n    if tab_id:\n        print(f"\\n--- \u5173\u95ed\u6807\u7b7e\u9875 ---")\n        target.send_command("Target.closeTarget", {"targetId": tab_id})\n    \n    time.sleep(2)\n    target.close()\n\n\n# ========================================\n# \u793a\u4f8b 4: \u591a\u6807\u7b7e\u9875\u5e76\u884c\u64cd\u4f5c\n# ========================================\ndef example_parallel_tabs():\n    """\n    \u6f14\u793a\u591a\u6807\u7b7e\u9875\u5e76\u884c\u64cd\u4f5c:\n    1. \u521b\u5efa\u591a\u4e2a\u6807\u7b7e\u9875\n    2. \u540c\u65f6\u63a7\u5236\u591a\u4e2a\u6807\u7b7e\u9875\n    3. \u6536\u96c6\u591a\u4e2a\u6807\u7b7e\u9875\u7684\u7ed3\u679c\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 4: \u591a\u6807\u7b7e\u9875\u5e76\u884c\u64cd\u4f5c")\n    print("="*60)\n    \n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    target.send_command("Target.setDiscoverTargets", {"discover": True})\n    target.send_command("Target.setAutoAttach", {\n        "autoAttach": True,\n        "waitForDebuggerOnStart": False,\n        "flatten": True\n    })\n    \n    urls = [\n        "https://example.com",\n        "https://www.wikipedia.org",\n        "https://news.ycombinator.com"\n    ]\n    \n    tabs = []\n    sessions = {}\n    \n    def handle_attached(event):\n        session_id = event[\'params\'][\'sessionId\']\n        target_id = event[\'params\'][\'targetInfo\'][\'targetId\']\n        sessions[target_id] = session_id\n    \n    target.on_event("Target.attachedToTarget", handle_attached)\n    \n    # 1. \u521b\u5efa\u591a\u4e2a\u6807\u7b7e\u9875\n    print(f"\\n--- \u521b\u5efa {len(urls)} \u4e2a\u6807\u7b7e\u9875 ---")\n    for i, url in enumerate(urls, 1):\n        print(f"    \u521b\u5efa\u6807\u7b7e\u9875 {i}: {url}")\n        result = target.send_command("Target.createTarget", {"url": url})\n        if \'result\' in result:\n            tabs.append({\n                \'targetId\': result[\'result\'][\'targetId\'],\n                \'url\': url\n            })\n    \n    time.sleep(4)\n    \n    # 2. \u5bf9\u6bcf\u4e2a\u6807\u7b7e\u9875\u6267\u884c\u64cd\u4f5c\n    print(f"\\n--- \u5e76\u884c\u64cd\u4f5c {len(tabs)} \u4e2a\u6807\u7b7e\u9875 ---")\n    for i, tab in enumerate(tabs, 1):\n        target_id = tab[\'targetId\']\n        if target_id in sessions:\n            session_id = sessions[target_id]\n            \n            print(f"\\n  \u64cd\u4f5c\u6807\u7b7e\u9875 {i} [Session: {session_id[:20]}...]")\n            \n            # \u542f\u7528 Runtime\n            target.send_command("Target.sendMessageToTarget", {\n                "sessionId": session_id,\n                "message": json.dumps({\n                    "id": 100 + i,\n                    "method": "Runtime.enable",\n                    "params": {}\n                })\n            })\n            \n            # \u6267\u884c JavaScript\n            target.send_command("Target.sendMessageToTarget", {\n                "sessionId": session_id,\n                "message": json.dumps({\n                    "id": 200 + i,\n                    "method": "Runtime.evaluate",\n                    "params": {\n                        "expression": f"console.log(\'\u6807\u7b7e\u9875 {i} \u6b63\u5728\u6267\u884c\')"\n                    }\n                })\n            })\n    \n    time.sleep(2)\n    \n    # 3. \u6536\u96c6\u4fe1\u606f\n    print(f"\\n--- \u83b7\u53d6\u6240\u6709\u6807\u7b7e\u9875\u4fe1\u606f ---")\n    all_targets = target.send_command("Target.getTargets")\n    if \'result\' in all_targets:\n        page_targets = [\n            t for t in all_targets[\'result\'][\'targetInfos\'] \n            if t.get(\'type\') == \'page\'\n        ]\n        print(f"    \u5f53\u524d\u9875\u9762\u7c7b\u578b Targets: {len(page_targets)} \u4e2a")\n    \n    # 4. \u6e05\u7406\u6240\u6709\u6807\u7b7e\u9875\n    print(f"\\n--- \u6e05\u7406: \u5173\u95ed\u6240\u6709\u521b\u5efa\u7684\u6807\u7b7e\u9875 ---")\n    for i, tab in enumerate(tabs, 1):\n        target.send_command("Target.closeTarget", {\n            "targetId": tab[\'targetId\']\n        })\n        print(f"    \u5df2\u5173\u95ed\u6807\u7b7e\u9875 {i}")\n    \n    time.sleep(2)\n    target.close()\n\n\n# ========================================\n# \u793a\u4f8b 5: Service Worker \u548c\u540e\u53f0 Targets\n# ========================================\ndef example_service_workers():\n    """\n    \u6f14\u793a Service Worker \u7ba1\u7406:\n    1. \u53d1\u73b0 Service Worker targets\n    2. \u9644\u52a0\u5230 Service Worker\n    3. \u76d1\u63a7 Worker \u751f\u547d\u5468\u671f\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 5: Service Worker \u548c\u540e\u53f0 Targets")\n    print("="*60)\n    \n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    worker_targets = []\n    \n    def handle_target_created(event):\n        info = event[\'params\'][\'targetInfo\']\n        target_type = info.get(\'type\')\n        \n        if target_type in [\'service_worker\', \'worker\', \'shared_worker\']:\n            worker_targets.append(info)\n            print(f"\\n\ud83d\udc77 \u53d1\u73b0 Worker:")\n            print(f"    \u7c7b\u578b: {target_type}")\n            print(f"    URL: {info.get(\'url\', \'N/A\')[:80]}")\n            print(f"    Target ID: {info.get(\'targetId\', \'N/A\')[:40]}...")\n    \n    target.on_event("Target.targetCreated", handle_target_created)\n    \n    # 1. \u542f\u7528\u53d1\u73b0\n    target.send_command("Target.setDiscoverTargets", {"discover": True})\n    time.sleep(1)\n    \n    # 2. \u83b7\u53d6\u6240\u6709 targets \u5e76\u8fc7\u6ee4 workers\n    print("\\n--- \u626b\u63cf\u73b0\u6709 Targets ---")\n    all_targets = target.send_command("Target.getTargets")\n    \n    if \'result\' in all_targets:\n        targets_by_type = {}\n        for info in all_targets[\'result\'][\'targetInfos\']:\n            t_type = info.get(\'type\', \'unknown\')\n            targets_by_type[t_type] = targets_by_type.get(t_type, 0) + 1\n        \n        print(f"\\n\ud83d\udcca Targets \u5206\u7c7b\u7edf\u8ba1:")\n        for t_type, count in sorted(targets_by_type.items()):\n            print(f"    {t_type}: {count}")\n        \n        # \u663e\u793a\u6240\u6709 worker \u7c7b\u578b\u7684 targets\n        worker_types = [\'service_worker\', \'worker\', \'shared_worker\']\n        workers = [\n            t for t in all_targets[\'result\'][\'targetInfos\']\n            if t.get(\'type\') in worker_types\n        ]\n        \n        if workers:\n            print(f"\\n\ud83d\udc77 \u5f53\u524d\u6d3b\u8dc3\u7684 Workers ({len(workers)} \u4e2a):")\n            for i, worker in enumerate(workers, 1):\n                print(f"\\n  {i}. {worker.get(\'type\', \'N/A\')}")\n                print(f"     URL: {worker.get(\'url\', \'N/A\')[:80]}")\n                print(f"     Title: {worker.get(\'title\', \'N/A\')}")\n        else:\n            print(f"\\n    \u6682\u65e0\u6d3b\u8dc3\u7684 Workers")\n    \n    # 3. \u521b\u5efa\u4e00\u4e2a\u5305\u542b Service Worker \u7684\u9875\u9762\n    print("\\n--- \u521b\u5efa\u5305\u542b Service Worker \u7684\u6d4b\u8bd5\u9875\u9762 ---")\n    test_tab = target.send_command("Target.createTarget", {\n        "url": "https://mdn.github.io/sw-test/"  # \u4e00\u4e2a\u6709 Service Worker \u7684\u793a\u4f8b\n    })\n    \n    print("    \u7b49\u5f85 Service Worker \u6ce8\u518c...")\n    time.sleep(5)\n    \n    # 4. \u518d\u6b21\u68c0\u67e5 workers\n    print("\\n--- \u68c0\u67e5\u65b0\u7684 Workers ---")\n    if worker_targets:\n        print(f"    \u53d1\u73b0\u4e86 {len(worker_targets)} \u4e2a\u65b0 Worker")\n    \n    # 5. \u6e05\u7406\n    if \'result\' in test_tab:\n        target.send_command("Target.closeTarget", {\n            "targetId": test_tab[\'result\'][\'targetId\']\n        })\n    \n    time.sleep(2)\n    target.close()\n\n\n# ========================================\n# \u793a\u4f8b 6: \u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u9694\u79bb\uff08\u9690\u8eab\u6a21\u5f0f\u6a21\u62df\uff09\n# ========================================\ndef example_browser_contexts():\n    """\n    \u6f14\u793a\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u9694\u79bb:\n    1. \u521b\u5efa\u591a\u4e2a\u9694\u79bb\u7684\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\n    2. \u5728\u4e0d\u540c\u4e0a\u4e0b\u6587\u4e2d\u64cd\u4f5c\n    3. \u9a8c\u8bc1 Cookie \u548c\u5b58\u50a8\u9694\u79bb\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 6: \u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u9694\u79bb")\n    print("="*60)\n    \n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    target.send_command("Target.setDiscoverTargets", {"discover": True})\n    \n    contexts = []\n    \n    # 1. \u521b\u5efa\u7b2c\u4e00\u4e2a\u9694\u79bb\u4e0a\u4e0b\u6587\n    print("\\n--- \u521b\u5efa\u4e0a\u4e0b\u6587 1 ---")\n    ctx1 = target.send_command("Target.createBrowserContext", {\n        "disposeOnDetach": True\n    })\n    if \'result\' in ctx1:\n        ctx1_id = ctx1[\'result\'][\'browserContextId\']\n        contexts.append(ctx1_id)\n        print(f"    \u4e0a\u4e0b\u6587 1 ID: {ctx1_id[:40]}...")\n        \n        # \u5728\u4e0a\u4e0b\u6587 1 \u4e2d\u521b\u5efa\u6807\u7b7e\u9875\n        tab1 = target.send_command("Target.createTarget", {\n            "url": "https://httpbin.org/cookies/set/context1/value1",\n            "browserContextId": ctx1_id\n        })\n        print(f"    \u5df2\u5728\u4e0a\u4e0b\u6587 1 \u4e2d\u521b\u5efa\u6807\u7b7e\u9875")\n    \n    time.sleep(2)\n    \n    # 2. \u521b\u5efa\u7b2c\u4e8c\u4e2a\u9694\u79bb\u4e0a\u4e0b\u6587\n    print("\\n--- \u521b\u5efa\u4e0a\u4e0b\u6587 2 ---")\n    ctx2 = target.send_command("Target.createBrowserContext", {\n        "disposeOnDetach": True\n    })\n    if \'result\' in ctx2:\n        ctx2_id = ctx2[\'result\'][\'browserContextId\']\n        contexts.append(ctx2_id)\n        print(f"    \u4e0a\u4e0b\u6587 2 ID: {ctx2_id[:40]}...")\n        \n        # \u5728\u4e0a\u4e0b\u6587 2 \u4e2d\u521b\u5efa\u6807\u7b7e\u9875\n        tab2 = target.send_command("Target.createTarget", {\n            "url": "https://httpbin.org/cookies/set/context2/value2",\n            "browserContextId": ctx2_id\n        })\n        print(f"    \u5df2\u5728\u4e0a\u4e0b\u6587 2 \u4e2d\u521b\u5efa\u6807\u7b7e\u9875")\n    \n    time.sleep(2)\n    \n    # 3. \u521b\u5efa\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u4e2d\u7684\u6807\u7b7e\u9875\n    print("\\n--- \u5728\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u4e2d\u521b\u5efa\u6807\u7b7e\u9875 ---")\n    tab3 = target.send_command("Target.createTarget", {\n        "url": "https://httpbin.org/cookies/set/default/value3"\n    })\n    \n    time.sleep(2)\n    \n    # 4. \u83b7\u53d6\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u5217\u8868\n    print("\\n--- \u83b7\u53d6\u6240\u6709\u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587 ---")\n    all_contexts = target.send_command("Target.getBrowserContexts")\n    if \'result\' in all_contexts:\n        context_ids = all_contexts[\'result\'][\'browserContextIds\']\n        print(f"    \u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u6570\u91cf: {len(context_ids) + 1}")  # +1 \u662f\u9ed8\u8ba4\u4e0a\u4e0b\u6587\n        for i, ctx_id in enumerate(context_ids, 1):\n            print(f"    {i}. {ctx_id[:40]}...")\n    \n    # 5. \u663e\u793a\u6240\u6709\u6807\u7b7e\u9875\u53ca\u5176\u6240\u5c5e\u4e0a\u4e0b\u6587\n    print("\\n--- \u6240\u6709\u6807\u7b7e\u9875\u53ca\u5176\u4e0a\u4e0b\u6587 ---")\n    all_targets = target.send_command("Target.getTargets")\n    if \'result\' in all_targets:\n        pages = [t for t in all_targets[\'result\'][\'targetInfos\'] if t.get(\'type\') == \'page\']\n        for i, page in enumerate(pages, 1):\n            ctx_id = page.get(\'browserContextId\', \'\u9ed8\u8ba4\u4e0a\u4e0b\u6587\')\n            print(f"    {i}. URL: {page.get(\'url\', \'N/A\')[:60]}")\n            print(f"       \u4e0a\u4e0b\u6587: {ctx_id[:40] if ctx_id != \'\u9ed8\u8ba4\u4e0a\u4e0b\u6587\' else ctx_id}...")\n    \n    # 6. \u6e05\u7406\u4e0a\u4e0b\u6587\uff08\u4f1a\u81ea\u52a8\u5173\u95ed\u5176\u4e2d\u7684\u6807\u7b7e\u9875\uff09\n    print("\\n--- \u6e05\u7406: \u9500\u6bc1\u6240\u6709\u521b\u5efa\u7684\u4e0a\u4e0b\u6587 ---")\n    for i, ctx_id in enumerate(contexts, 1):\n        target.send_command("Target.disposeBrowserContext", {\n            "browserContextId": ctx_id\n        })\n        print(f"    \u5df2\u9500\u6bc1\u4e0a\u4e0b\u6587 {i}")\n    \n    # \u6e05\u7406\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u4e2d\u7684\u6807\u7b7e\u9875\n    if \'result\' in tab3:\n        target.send_command("Target.closeTarget", {\n            "targetId": tab3[\'result\'][\'targetId\']\n        })\n    \n    time.sleep(2)\n    target.close()\n\n\n# ========================================\n# \u793a\u4f8b 7: \u7efc\u5408\u5e94\u7528 - Target \u7ba1\u7406\u5668\n# ========================================\ndef example_target_manager():\n    """\n    \u7efc\u5408\u793a\u4f8b: \u5b9e\u73b0\u5b8c\u6574\u7684 Target \u7ba1\u7406\u5668\n    1. \u5b9e\u65f6\u76d1\u63a7\u6240\u6709 targets\n    2. \u81ea\u52a8\u7ba1\u7406\u8fde\u63a5\n    3. \u7edf\u8ba1\u548c\u62a5\u544a\n    """\n    print("\\n" + "="*60)\n    print("\u793a\u4f8b 7: Target \u7ba1\u7406\u5668")\n    print("="*60)\n    \n    browser_ws = get_browser_websocket_url()\n    target = CDPTarget(browser_ws)\n    \n    # \u7ba1\u7406\u5668\u72b6\u6001\n    manager_state = {\n        "all_targets": {},\n        "sessions": {},\n        "statistics": {\n            "created": 0,\n            "destroyed": 0,\n            "attached": 0,\n            "detached": 0\n        }\n    }\n    \n    def handle_target_created(event):\n        info = event[\'params\'][\'targetInfo\']\n        target_id = info[\'targetId\']\n        \n        manager_state["all_targets"][target_id] = info\n        manager_state["statistics"]["created"] += 1\n        \n        print(f"\\n\ud83c\udd95 Target #{manager_state[\'statistics\'][\'created\']} \u521b\u5efa")\n        print(f"    ID: {target_id[:30]}...")\n        print(f"    \u7c7b\u578b: {info.get(\'type\', \'N/A\')}")\n        print(f"    URL: {info.get(\'url\', \'N/A\')[:60]}")\n    \n    def handle_target_destroyed(event):\n        target_id = event[\'params\'][\'targetId\']\n        \n        if target_id in manager_state["all_targets"]:\n            del manager_state["all_targets"][target_id]\n        \n        manager_state["statistics"]["destroyed"] += 1\n        print(f"\\n\u274c Target \u9500\u6bc1: {target_id[:30]}...")\n    \n    def handle_target_info_changed(event):\n        info = event[\'params\'][\'targetInfo\']\n        target_id = info[\'targetId\']\n        \n        if target_id in manager_state["all_targets"]:\n            old_url = manager_state["all_targets"][target_id].get(\'url\', \'\')\n            new_url = info.get(\'url\', \'\')\n            \n            if old_url != new_url:\n                print(f"\\n\ud83d\udd04 Target \u5bfc\u822a")\n                print(f"    \u4ece: {old_url[:50]}")\n                print(f"    \u5230: {new_url[:50]}")\n            \n            manager_state["all_targets"][target_id] = info\n    \n    def handle_attached_to_target(event):\n        session_id = event[\'params\'][\'sessionId\']\n        target_id = event[\'params\'][\'targetInfo\'][\'targetId\']\n        \n        manager_state["sessions"][target_id] = session_id\n        manager_state["statistics"]["attached"] += 1\n        \n        print(f"\\n\u2705 \u9644\u52a0\u5230 Target")\n        print(f"    Target: {target_id[:30]}...")\n        print(f"    Session: {session_id[:30]}...")\n    \n    def handle_detached_from_target(event):\n        session_id = event[\'params\'][\'sessionId\']\n        manager_state["statistics"]["detached"] += 1\n        \n        # \u627e\u5230\u5bf9\u5e94\u7684 target_id \u5e76\u79fb\u9664\n        for tid, sid in list(manager_state["sessions"].items()):\n            if sid == session_id:\n                del manager_state["sessions"][tid]\n                break\n        \n        print(f"\\n\u274c \u4ece Target \u5206\u79bb: {session_id[:30]}...")\n    \n    # \u6ce8\u518c\u6240\u6709\u4e8b\u4ef6\n    target.on_event("Target.targetCreated", handle_target_created)\n    target.on_event("Target.targetDestroyed", handle_target_destroyed)\n    target.on_event("Target.targetInfoChanged", handle_target_info_changed)\n    target.on_event("Target.attachedToTarget", handle_attached_to_target)\n    target.on_event("Target.detachedFromTarget", handle_detached_from_target)\n    \n    # \u542f\u52a8\u7ba1\u7406\u5668\n    print("\\n--- \u542f\u52a8 Target \u7ba1\u7406\u5668 ---")\n    target.send_command("Target.setDiscoverTargets", {"discover": True})\n    target.send_command("Target.setAutoAttach", {\n        "autoAttach": True,\n        "waitForDebuggerOnStart": False,\n        "flatten": True\n    })\n    \n    time.sleep(2)\n    \n    # \u521b\u5efa\u4e00\u4e9b\u6d4b\u8bd5 targets\n    print("\\n--- \u521b\u5efa\u6d4b\u8bd5 Targets ---")\n    test_urls = [\n        "https://example.com",\n        "https://www.wikipedia.org"\n    ]\n    \n    test_targets = []\n    for url in test_urls:\n        result = target.send_command("Target.createTarget", {"url": url})\n        if \'result\' in result:\n            test_targets.append(result[\'result\'][\'targetId\'])\n    \n    time.sleep(5)\n    \n    # \u663e\u793a\u5f53\u524d\u72b6\u6001\n    print("\\n" + "="*60)\n    print("\ud83d\udcca \u5f53\u524d\u7ba1\u7406\u5668\u72b6\u6001:")\n    print(f"    \u6d3b\u8dc3 Targets: {len(manager_state[\'all_targets\'])}")\n    print(f"    \u5df2\u9644\u52a0\u4f1a\u8bdd: {len(manager_state[\'sessions\'])}")\n    \n    print("\\n\ud83d\udcc8 \u7edf\u8ba1\u6570\u636e:")\n    for key, value in manager_state[\'statistics\'].items():\n        print(f"    {key}: {value}")\n    \n    print("\\n\ud83d\udccb Targets \u8be6\u60c5:")\n    for i, (tid, info) in enumerate(manager_state[\'all_targets\'].items(), 1):\n        print(f"\\n  {i}. {info.get(\'type\', \'N/A\')}")\n        print(f"     ID: {tid[:40]}...")\n        print(f"     URL: {info.get(\'url\', \'N/A\')[:60]}")\n        print(f"     \u5df2\u9644\u52a0: {\'\u662f\' if tid in manager_state[\'sessions\'] else \'\u5426\'}")\n    \n    # \u901a\u8fc7 session \u63a7\u5236 target\n    print("\\n--- \u901a\u8fc7 Session \u63a7\u5236 Targets ---")\n    for tid, session_id in manager_state[\'sessions\'].items():\n        if tid in test_targets[:1]:  # \u53ea\u63a7\u5236\u7b2c\u4e00\u4e2a\u6d4b\u8bd5 target\n            print(f"\\n\u63a7\u5236 Target: {tid[:30]}...")\n            \n            # \u6267\u884c\u622a\u56fe\n            message = {\n                "id": 999,\n                "method": "Page.captureScreenshot",\n                "params": {"format": "png"}\n            }\n            \n            target.send_command("Target.sendMessageToTarget", {\n                "sessionId": session_id,\n                "message": json.dumps(message)\n            })\n            print(f"    \u5df2\u53d1\u9001\u622a\u56fe\u547d\u4ee4")\n    \n    time.sleep(2)\n    \n    # \u6e05\u7406\n    print("\\n--- \u6e05\u7406\u6240\u6709\u6d4b\u8bd5 Targets ---")\n    for tid in test_targets:\n        target.send_command("Target.closeTarget", {"targetId": tid})\n    \n    time.sleep(2)\n    \n    # \u6700\u7ec8\u62a5\u544a\n    print("\\n" + "="*60)\n    print("\ud83d\udcca \u6700\u7ec8\u7edf\u8ba1:")\n    print(f"    \u603b\u521b\u5efa: {manager_state[\'statistics\'][\'created\']}")\n    print(f"    \u603b\u9500\u6bc1: {manager_state[\'statistics\'][\'destroyed\']}")\n    print(f"    \u603b\u9644\u52a0: {manager_state[\'statistics\'][\'attached\']}")\n    print(f"    \u603b\u5206\u79bb: {manager_state[\'statistics\'][\'detached\']}")\n    print(f"    \u5269\u4f59\u6d3b\u8dc3: {len(manager_state[\'all_targets\'])}")\n    print("="*60)\n    \n    target.close()\n\n\n# ========================================\n# \u4e3b\u51fd\u6570\n# ========================================\nif __name__ == "__main__":\n    print("\\n" + "="*60)\n    print("CDP Target \u57df\u5b8c\u6574\u793a\u4f8b\u96c6")\n    print("="*60)\n    print("\\n\u8bf7\u786e\u4fdd Chrome \u5df2\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8:")\n    print("chrome --remote-debugging-port=9222 --user-data-dir=/tmp/chrome-debug")\n    print("\\n\u9009\u62e9\u8981\u8fd0\u884c\u7684\u793a\u4f8b:")\n    print("1. Target \u53d1\u73b0\u548c\u4fe1\u606f\u83b7\u53d6")\n    print("2. \u521b\u5efa\u548c\u7ba1\u7406 Targets")\n    print("3. \u9644\u52a0\u5230 Target \u5e76\u63a7\u5236")\n    print("4. \u591a\u6807\u7b7e\u9875\u5e76\u884c\u64cd\u4f5c")\n    print("5. Service Worker \u548c\u540e\u53f0 Targets")\n    print("6. \u6d4f\u89c8\u5668\u4e0a\u4e0b\u6587\u9694\u79bb")\n    print("7. Target \u7ba1\u7406\u5668\uff08\u7efc\u5408\uff09")\n    print("0. \u8fd0\u884c\u6240\u6709\u793a\u4f8b")\n    \n    try:\n        choice = input("\\n\u8bf7\u8f93\u5165\u9009\u62e9 (0-7): ").strip()\n        \n        examples = {\n            "1": example_target_discovery,\n            "2": example_create_and_manage_targets,\n            "3": example_attach_and_control,\n            "4": example_parallel_tabs,\n            "5": example_service_workers,\n            "6": example_browser_contexts,\n            "7": example_target_manager\n        }\n        \n        if choice == "0":\n            for name, example in examples.items():\n                print(f"\\n{\'=\'*60}")\n                print(f"\u8fd0\u884c\u793a\u4f8b {name}...")\n                print(f"{\'=\'*60}")\n                example()\n                time.sleep(3)\n        elif choice in examples:\n            examples[choice]()\n        else:\n            print("\u65e0\u6548\u9009\u62e9")\n        \n        print("\\n\u2705 \u793a\u4f8b\u6267\u884c\u5b8c\u6210\uff01")\n        \n    except requests.exceptions.ConnectionError:\n        print("\\n\u274c \u9519\u8bef: \u65e0\u6cd5\u8fde\u63a5\u5230 Chrome")\n        print("\u8bf7\u786e\u4fdd Chrome \u5df2\u4f7f\u7528 --remote-debugging-port=9222 \u542f\u52a8")\n    except KeyboardInterrupt:\n        print("\\n\\n\u26a0\ufe0f \u7528\u6237\u4e2d\u65ad")\n    except Exception as e:\n        print(f"\\n\u274c \u53d1\u751f\u9519\u8bef: {e}")\n        import traceback\n        traceback.print_exc()\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(_,{...e})}):_(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(6540);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);