"use strict";(globalThis.webpackChunkmy_tutorial_site=globalThis.webpackChunkmy_tutorial_site||[]).push([[7018],{6710:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"\u5176\u4ed6/ChromeExtension/1","title":"1.chrome.tabs","description":"chrome.tabs API \u662f Chrome \u6269\u5c55\u5f00\u53d1\u4e2d\u6700\u5e38\u7528\u7684 API \u4e4b\u4e00,\u7528\u4e8e\u4e0e\u6d4f\u89c8\u5668\u6807\u7b7e\u9875\u8fdb\u884c\u4ea4\u4e92\u3002\u4ee5\u4e0b\u662f\u5176\u4e3b\u8981\u529f\u80fd\u548c\u4f7f\u7528\u65b9\u6cd5\u7684\u8be6\u7ec6\u8bf4\u660e\u3002","source":"@site/docs/\u5176\u4ed6/ChromeExtension/1.md","sourceDirName":"\u5176\u4ed6/ChromeExtension","slug":"/\u5176\u4ed6/ChromeExtension/1","permalink":"/saodoc2/docs/\u5176\u4ed6/ChromeExtension/1","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"1","title":"1.chrome.tabs","sidebar_position":1},"sidebar":"otherSidebar","previous":{"title":"1.Claude Skills\u5165\u95e8","permalink":"/saodoc2/docs/\u5176\u4ed6/AgentSkills/1"},"next":{"title":"2.Chrome.sidePanel","permalink":"/saodoc2/docs/\u5176\u4ed6/ChromeExtension/2"}}');var t=a(4848),r=a(8453);const c={id:1,title:"1.chrome.tabs",sidebar_position:1},o="Chrome.tabs API \u8be6\u89e3",l={},d=[{value:"\u4e00\u3001\u6743\u9650\u914d\u7f6e",id:"\u4e00\u6743\u9650\u914d\u7f6e",level:2},{value:"\u4e8c\u3001\u6838\u5fc3\u65b9\u6cd5",id:"\u4e8c\u6838\u5fc3\u65b9\u6cd5",level:2},{value:"1. \u67e5\u8be2\u6807\u7b7e\u9875 (chrome.tabs.query)",id:"1-\u67e5\u8be2\u6807\u7b7e\u9875-chrometabsquery",level:3},{value:"2. \u521b\u5efa\u6807\u7b7e\u9875 (chrome.tabs.create)",id:"2-\u521b\u5efa\u6807\u7b7e\u9875-chrometabscreate",level:3},{value:"3. \u66f4\u65b0\u6807\u7b7e\u9875 (chrome.tabs.update)",id:"3-\u66f4\u65b0\u6807\u7b7e\u9875-chrometabsupdate",level:3},{value:"4. \u79fb\u52a8\u6807\u7b7e\u9875 (chrome.tabs.move)",id:"4-\u79fb\u52a8\u6807\u7b7e\u9875-chrometabsmove",level:3},{value:"5. \u91cd\u65b0\u52a0\u8f7d\u6807\u7b7e\u9875 (chrome.tabs.reload)",id:"5-\u91cd\u65b0\u52a0\u8f7d\u6807\u7b7e\u9875-chrometabsreload",level:3},{value:"6. \u5173\u95ed\u6807\u7b7e\u9875 (chrome.tabs.remove)",id:"6-\u5173\u95ed\u6807\u7b7e\u9875-chrometabsremove",level:3},{value:"7. \u83b7\u53d6\u6807\u7b7e\u9875\u4fe1\u606f (chrome.tabs.get)",id:"7-\u83b7\u53d6\u6807\u7b7e\u9875\u4fe1\u606f-chrometabsget",level:3},{value:"8. \u590d\u5236\u6807\u7b7e\u9875 (chrome.tabs.duplicate)",id:"8-\u590d\u5236\u6807\u7b7e\u9875-chrometabsduplicate",level:3},{value:"9. \u6267\u884c\u811a\u672c (chrome.tabs.executeScript)",id:"9-\u6267\u884c\u811a\u672c-chrometabsexecutescript",level:3},{value:"10. \u5411\u6807\u7b7e\u9875\u53d1\u9001\u6d88\u606f (chrome.tabs.sendMessage)",id:"10-\u5411\u6807\u7b7e\u9875\u53d1\u9001\u6d88\u606f-chrometabssendmessage",level:3},{value:"11. \u6355\u83b7\u6807\u7b7e\u9875\u622a\u56fe (chrome.tabs.captureVisibleTab)",id:"11-\u6355\u83b7\u6807\u7b7e\u9875\u622a\u56fe-chrometabscapturevisibletab",level:3},{value:"12. \u5206\u7ec4\u76f8\u5173 (Chrome 88+)",id:"12-\u5206\u7ec4\u76f8\u5173-chrome-88",level:3},{value:"13. \u5176\u4ed6\u5b9e\u7528\u65b9\u6cd5",id:"13-\u5176\u4ed6\u5b9e\u7528\u65b9\u6cd5",level:3},{value:"\u4e09\u3001\u4e8b\u4ef6\u76d1\u542c",id:"\u4e09\u4e8b\u4ef6\u76d1\u542c",level:2},{value:"1. \u6807\u7b7e\u9875\u521b\u5efa\u4e8b\u4ef6",id:"1-\u6807\u7b7e\u9875\u521b\u5efa\u4e8b\u4ef6",level:3},{value:"2. \u6807\u7b7e\u9875\u66f4\u65b0\u4e8b\u4ef6",id:"2-\u6807\u7b7e\u9875\u66f4\u65b0\u4e8b\u4ef6",level:3},{value:"3. \u6807\u7b7e\u9875\u6fc0\u6d3b\u4e8b\u4ef6",id:"3-\u6807\u7b7e\u9875\u6fc0\u6d3b\u4e8b\u4ef6",level:3},{value:"4. \u6807\u7b7e\u9875\u79fb\u9664\u4e8b\u4ef6",id:"4-\u6807\u7b7e\u9875\u79fb\u9664\u4e8b\u4ef6",level:3},{value:"5. \u6807\u7b7e\u9875\u79fb\u52a8\u4e8b\u4ef6",id:"5-\u6807\u7b7e\u9875\u79fb\u52a8\u4e8b\u4ef6",level:3},{value:"6. \u6807\u7b7e\u9875\u66ff\u6362\u4e8b\u4ef6",id:"6-\u6807\u7b7e\u9875\u66ff\u6362\u4e8b\u4ef6",level:3},{value:"7. \u6807\u7b7e\u9875\u5206\u79bb/\u9644\u52a0\u4e8b\u4ef6",id:"7-\u6807\u7b7e\u9875\u5206\u79bb\u9644\u52a0\u4e8b\u4ef6",level:3},{value:"\u56db\u3001\u5b9e\u7528\u793a\u4f8b",id:"\u56db\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u793a\u4f8b1: \u5173\u95ed\u91cd\u590d\u7684\u6807\u7b7e\u9875",id:"\u793a\u4f8b1-\u5173\u95ed\u91cd\u590d\u7684\u6807\u7b7e\u9875",level:3},{value:"\u793a\u4f8b2: \u5728\u6240\u6709\u6807\u7b7e\u9875\u4e2d\u6267\u884c\u64cd\u4f5c",id:"\u793a\u4f8b2-\u5728\u6240\u6709\u6807\u7b7e\u9875\u4e2d\u6267\u884c\u64cd\u4f5c",level:3},{value:"\u793a\u4f8b3: \u6807\u7b7e\u9875\u7ba1\u7406\u5668",id:"\u793a\u4f8b3-\u6807\u7b7e\u9875\u7ba1\u7406\u5668",level:3},{value:"\u793a\u4f8b4: \u81ea\u52a8\u5237\u65b0\u6807\u7b7e\u9875",id:"\u793a\u4f8b4-\u81ea\u52a8\u5237\u65b0\u6807\u7b7e\u9875",level:3},{value:"\u4e94\u3001\u6ce8\u610f\u4e8b\u9879",id:"\u4e94\u6ce8\u610f\u4e8b\u9879",level:2}];function i(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"chrometabs-api-\u8be6\u89e3",children:"Chrome.tabs API \u8be6\u89e3"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"chrome.tabs"})," API \u662f Chrome \u6269\u5c55\u5f00\u53d1\u4e2d\u6700\u5e38\u7528\u7684 API \u4e4b\u4e00,\u7528\u4e8e\u4e0e\u6d4f\u89c8\u5668\u6807\u7b7e\u9875\u8fdb\u884c\u4ea4\u4e92\u3002\u4ee5\u4e0b\u662f\u5176\u4e3b\u8981\u529f\u80fd\u548c\u4f7f\u7528\u65b9\u6cd5\u7684\u8be6\u7ec6\u8bf4\u660e\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e00\u6743\u9650\u914d\u7f6e",children:"\u4e00\u3001\u6743\u9650\u914d\u7f6e"}),"\n",(0,t.jsxs)(n.p,{children:["\u9996\u5148\u9700\u8981\u5728 ",(0,t.jsx)(n.code,{children:"manifest.json"})," \u4e2d\u58f0\u660e\u6743\u9650:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "permissions": ["tabs"],\n  "host_permissions": ["<all_urls>"]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e8c\u6838\u5fc3\u65b9\u6cd5",children:"\u4e8c\u3001\u6838\u5fc3\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u67e5\u8be2\u6807\u7b7e\u9875-chrometabsquery",children:"1. \u67e5\u8be2\u6807\u7b7e\u9875 (chrome.tabs.query)"}),"\n",(0,t.jsx)(n.p,{children:"\u67e5\u8be2\u7b26\u5408\u6761\u4ef6\u7684\u6807\u7b7e\u9875,\u8fd9\u662f\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u4e4b\u4e00\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u83b7\u53d6\u5f53\u524d\u6d3b\u52a8\u6807\u7b7e\u9875\nchrome.tabs.query({active: true, currentWindow: true}, (tabs) => {\n  let currentTab = tabs[0];\n  console.log(currentTab.url, currentTab.title);\n});\n\n// \u83b7\u53d6\u6240\u6709\u6807\u7b7e\u9875\nchrome.tabs.query({}, (tabs) => {\n  console.log(`\u603b\u5171\u6709 ${tabs.length} \u4e2a\u6807\u7b7e\u9875`);\n});\n\n// \u67e5\u8be2\u7279\u5b9aURL\u7684\u6807\u7b7e\u9875\nchrome.tabs.query({url: "https://*.google.com/*"}, (tabs) => {\n  tabs.forEach(tab => console.log(tab.title));\n});\n\n// \u5176\u4ed6\u67e5\u8be2\u6761\u4ef6\nchrome.tabs.query({\n  active: false,        // \u975e\u6d3b\u52a8\u6807\u7b7e\u9875\n  pinned: true,         // \u56fa\u5b9a\u7684\u6807\u7b7e\u9875\n  audible: true,        // \u6b63\u5728\u64ad\u653e\u58f0\u97f3\u7684\u6807\u7b7e\u9875\n  muted: false,         // \u672a\u9759\u97f3\u7684\u6807\u7b7e\u9875\n  highlighted: true,    // \u9ad8\u4eae\u7684\u6807\u7b7e\u9875\n  currentWindow: true   // \u5f53\u524d\u7a97\u53e3\u7684\u6807\u7b7e\u9875\n}, (tabs) => {\n  // \u5904\u7406\u7ed3\u679c\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u521b\u5efa\u6807\u7b7e\u9875-chrometabscreate",children:"2. \u521b\u5efa\u6807\u7b7e\u9875 (chrome.tabs.create)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u521b\u5efa\u65b0\u6807\u7b7e\u9875\nchrome.tabs.create({\n  url: 'https://www.example.com',\n  active: true  // \u662f\u5426\u6fc0\u6d3b\u65b0\u6807\u7b7e\u9875\n}, (tab) => {\n  console.log('\u521b\u5efa\u7684\u6807\u7b7e\u9875ID:', tab.id);\n});\n\n// \u5728\u7279\u5b9a\u4f4d\u7f6e\u521b\u5efa\u6807\u7b7e\u9875\nchrome.tabs.create({\n  url: 'https://www.example.com',\n  index: 0,  // \u653e\u5728\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\n  pinned: true,  // \u56fa\u5b9a\u6807\u7b7e\u9875\n  openerTabId: currentTabId  // \u8bbe\u7f6e\u6253\u5f00\u8005\u6807\u7b7e\u9875\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-\u66f4\u65b0\u6807\u7b7e\u9875-chrometabsupdate",children:"3. \u66f4\u65b0\u6807\u7b7e\u9875 (chrome.tabs.update)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u66f4\u65b0\u5f53\u524d\u6807\u7b7e\u9875\u7684URL\nchrome.tabs.update(tabId, {\n  url: 'https://www.newurl.com'\n});\n\n// \u6fc0\u6d3b\u67d0\u4e2a\u6807\u7b7e\u9875\nchrome.tabs.update(tabId, {\n  active: true\n});\n\n// \u9759\u97f3/\u53d6\u6d88\u9759\u97f3\nchrome.tabs.update(tabId, {\n  muted: true\n});\n\n// \u56fa\u5b9a/\u53d6\u6d88\u56fa\u5b9a\u6807\u7b7e\u9875\nchrome.tabs.update(tabId, {\n  pinned: true\n});\n\n// \u5982\u679c\u4e0d\u6307\u5b9atabId,\u5219\u66f4\u65b0\u5f53\u524d\u6807\u7b7e\u9875\nchrome.tabs.update({\n  url: 'https://www.example.com'\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-\u79fb\u52a8\u6807\u7b7e\u9875-chrometabsmove",children:"4. \u79fb\u52a8\u6807\u7b7e\u9875 (chrome.tabs.move)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u79fb\u52a8\u5355\u4e2a\u6807\u7b7e\u9875\nchrome.tabs.move(tabId, {\n  index: 0,  // \u79fb\u52a8\u5230\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\n  windowId: windowId  // \u53ef\u9009:\u79fb\u52a8\u5230\u5176\u4ed6\u7a97\u53e3\n});\n\n// \u79fb\u52a8\u591a\u4e2a\u6807\u7b7e\u9875\nchrome.tabs.move([tabId1, tabId2], {\n  index: -1  // -1 \u8868\u793a\u79fb\u5230\u6700\u540e\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-\u91cd\u65b0\u52a0\u8f7d\u6807\u7b7e\u9875-chrometabsreload",children:"5. \u91cd\u65b0\u52a0\u8f7d\u6807\u7b7e\u9875 (chrome.tabs.reload)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u91cd\u65b0\u52a0\u8f7d\u6307\u5b9a\u6807\u7b7e\u9875\nchrome.tabs.reload(tabId);\n\n// \u5f3a\u5236\u91cd\u65b0\u52a0\u8f7d(\u5ffd\u7565\u7f13\u5b58)\nchrome.tabs.reload(tabId, {\n  bypassCache: true\n});\n\n// \u91cd\u65b0\u52a0\u8f7d\u5f53\u524d\u6807\u7b7e\u9875\nchrome.tabs.reload();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"6-\u5173\u95ed\u6807\u7b7e\u9875-chrometabsremove",children:"6. \u5173\u95ed\u6807\u7b7e\u9875 (chrome.tabs.remove)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u5173\u95ed\u5355\u4e2a\u6807\u7b7e\u9875\nchrome.tabs.remove(tabId);\n\n// \u5173\u95ed\u591a\u4e2a\u6807\u7b7e\u9875\nchrome.tabs.remove([tabId1, tabId2, tabId3]);\n\n// \u5173\u95ed\u5f53\u524d\u6807\u7b7e\u9875\nchrome.tabs.query({active: true, currentWindow: true}, (tabs) => {\n  chrome.tabs.remove(tabs[0].id);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"7-\u83b7\u53d6\u6807\u7b7e\u9875\u4fe1\u606f-chrometabsget",children:"7. \u83b7\u53d6\u6807\u7b7e\u9875\u4fe1\u606f (chrome.tabs.get)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.get(tabId, (tab) => {\n  console.log('\u6807\u7b7e\u9875\u4fe1\u606f:', tab);\n  console.log('URL:', tab.url);\n  console.log('\u6807\u9898:', tab.title);\n  console.log('\u662f\u5426\u6d3b\u52a8:', tab.active);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"8-\u590d\u5236\u6807\u7b7e\u9875-chrometabsduplicate",children:"8. \u590d\u5236\u6807\u7b7e\u9875 (chrome.tabs.duplicate)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.duplicate(tabId, (duplicatedTab) => {\n  console.log('\u590d\u5236\u7684\u65b0\u6807\u7b7e\u9875ID:', duplicatedTab.id);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"9-\u6267\u884c\u811a\u672c-chrometabsexecutescript",children:"9. \u6267\u884c\u811a\u672c (chrome.tabs.executeScript)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6ce8\u610f:"})," Manifest V3 \u4e2d\u5df2\u5e9f\u5f03,\u6539\u7528 ",(0,t.jsx)(n.code,{children:"chrome.scripting.executeScript"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Manifest V2 \u5199\u6cd5\nchrome.tabs.executeScript(tabId, {\n  code: 'document.body.style.backgroundColor = \"red\"'\n});\n\nchrome.tabs.executeScript(tabId, {\n  file: 'content.js'\n});\n\n// Manifest V3 \u65b0\u5199\u6cd5\nchrome.scripting.executeScript({\n  target: { tabId: tabId },\n  func: () => {\n    document.body.style.backgroundColor = \"red\";\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"10-\u5411\u6807\u7b7e\u9875\u53d1\u9001\u6d88\u606f-chrometabssendmessage",children:"10. \u5411\u6807\u7b7e\u9875\u53d1\u9001\u6d88\u606f (chrome.tabs.sendMessage)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u53d1\u9001\u6d88\u606f\u5230\u6307\u5b9a\u6807\u7b7e\u9875\nchrome.tabs.sendMessage(tabId, {\n  action: "doSomething",\n  data: "hello"\n}, (response) => {\n  console.log(\'\u6536\u5230\u56de\u590d:\', response);\n});\n\n// \u5728content script\u4e2d\u63a5\u6536\u6d88\u606f\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.action === "doSomething") {\n    console.log(request.data);\n    sendResponse({result: "success"});\n  }\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"11-\u6355\u83b7\u6807\u7b7e\u9875\u622a\u56fe-chrometabscapturevisibletab",children:"11. \u6355\u83b7\u6807\u7b7e\u9875\u622a\u56fe (chrome.tabs.captureVisibleTab)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.captureVisibleTab(windowId, {\n  format: 'png',  // \u6216 'jpeg'\n  quality: 90     // JPEG\u8d28\u91cf (0-100)\n}, (dataUrl) => {\n  // dataUrl \u662f base64 \u7f16\u7801\u7684\u56fe\u7247\n  console.log(dataUrl);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"12-\u5206\u7ec4\u76f8\u5173-chrome-88",children:"12. \u5206\u7ec4\u76f8\u5173 (Chrome 88+)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u5c06\u6807\u7b7e\u9875\u6dfb\u52a0\u5230\u7ec4\nchrome.tabs.group({\n  tabIds: [tabId1, tabId2],\n  groupId: groupId  // \u53ef\u9009,\u4e0d\u6307\u5b9a\u5219\u521b\u5efa\u65b0\u7ec4\n});\n\n// \u53d6\u6d88\u6807\u7b7e\u9875\u5206\u7ec4\nchrome.tabs.ungroup(tabId);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"13-\u5176\u4ed6\u5b9e\u7528\u65b9\u6cd5",children:"13. \u5176\u4ed6\u5b9e\u7528\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u83b7\u53d6\u5f53\u524d\u6807\u7b7e\u9875\nchrome.tabs.getCurrent((tab) => {\n  console.log('\u5f53\u524d\u6807\u7b7e\u9875:', tab);\n});\n\n// \u68c0\u6d4b\u6807\u7b7e\u9875\u8bed\u8a00\nchrome.tabs.detectLanguage(tabId, (language) => {\n  console.log('\u68c0\u6d4b\u5230\u7684\u8bed\u8a00:', language);\n});\n\n// \u8bbe\u7f6e\u7f29\u653e\nchrome.tabs.setZoom(tabId, 1.5);  // 150%\n\n// \u83b7\u53d6\u7f29\u653e\nchrome.tabs.getZoom(tabId, (zoomFactor) => {\n  console.log('\u7f29\u653e\u6bd4\u4f8b:', zoomFactor);\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e09\u4e8b\u4ef6\u76d1\u542c",children:"\u4e09\u3001\u4e8b\u4ef6\u76d1\u542c"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u6807\u7b7e\u9875\u521b\u5efa\u4e8b\u4ef6",children:"1. \u6807\u7b7e\u9875\u521b\u5efa\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onCreated.addListener((tab) => {\n  console.log('\u65b0\u6807\u7b7e\u9875\u5df2\u521b\u5efa:', tab.id);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u6807\u7b7e\u9875\u66f4\u65b0\u4e8b\u4ef6",children:"2. \u6807\u7b7e\u9875\u66f4\u65b0\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  // changeInfo \u5305\u542b\u53d8\u5316\u7684\u5c5e\u6027\n  if (changeInfo.status === 'complete') {\n    console.log('\u9875\u9762\u52a0\u8f7d\u5b8c\u6210:', tab.url);\n  }\n  if (changeInfo.url) {\n    console.log('URL\u5df2\u6539\u53d8:', changeInfo.url);\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-\u6807\u7b7e\u9875\u6fc0\u6d3b\u4e8b\u4ef6",children:"3. \u6807\u7b7e\u9875\u6fc0\u6d3b\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onActivated.addListener((activeInfo) => {\n  console.log('\u6fc0\u6d3b\u7684\u6807\u7b7e\u9875ID:', activeInfo.tabId);\n  console.log('\u6240\u5728\u7a97\u53e3ID:', activeInfo.windowId);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-\u6807\u7b7e\u9875\u79fb\u9664\u4e8b\u4ef6",children:"4. \u6807\u7b7e\u9875\u79fb\u9664\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onRemoved.addListener((tabId, removeInfo) => {\n  console.log('\u6807\u7b7e\u9875\u5df2\u5173\u95ed:', tabId);\n  console.log('\u7a97\u53e3\u662f\u5426\u5173\u95ed:', removeInfo.isWindowClosing);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-\u6807\u7b7e\u9875\u79fb\u52a8\u4e8b\u4ef6",children:"5. \u6807\u7b7e\u9875\u79fb\u52a8\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onMoved.addListener((tabId, moveInfo) => {\n  console.log('\u6807\u7b7e\u9875\u5df2\u79fb\u52a8:', tabId);\n  console.log('\u4ece\u4f4d\u7f6e', moveInfo.fromIndex, '\u5230\u4f4d\u7f6e', moveInfo.toIndex);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"6-\u6807\u7b7e\u9875\u66ff\u6362\u4e8b\u4ef6",children:"6. \u6807\u7b7e\u9875\u66ff\u6362\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onReplaced.addListener((addedTabId, removedTabId) => {\n  console.log('\u6807\u7b7e\u9875\u88ab\u66ff\u6362');\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"7-\u6807\u7b7e\u9875\u5206\u79bb\u9644\u52a0\u4e8b\u4ef6",children:"7. \u6807\u7b7e\u9875\u5206\u79bb/\u9644\u52a0\u4e8b\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.onDetached.addListener((tabId, detachInfo) => {\n  console.log('\u6807\u7b7e\u9875\u4ece\u7a97\u53e3\u5206\u79bb');\n});\n\nchrome.tabs.onAttached.addListener((tabId, attachInfo) => {\n  console.log('\u6807\u7b7e\u9875\u9644\u52a0\u5230\u7a97\u53e3');\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u56db\u5b9e\u7528\u793a\u4f8b",children:"\u56db\u3001\u5b9e\u7528\u793a\u4f8b"}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b1-\u5173\u95ed\u91cd\u590d\u7684\u6807\u7b7e\u9875",children:"\u793a\u4f8b1: \u5173\u95ed\u91cd\u590d\u7684\u6807\u7b7e\u9875"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.query({}, (tabs) => {\n  let urlMap = {};\n  tabs.forEach(tab => {\n    if (urlMap[tab.url]) {\n      chrome.tabs.remove(tab.id);\n    } else {\n      urlMap[tab.url] = true;\n    }\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b2-\u5728\u6240\u6709\u6807\u7b7e\u9875\u4e2d\u6267\u884c\u64cd\u4f5c",children:"\u793a\u4f8b2: \u5728\u6240\u6709\u6807\u7b7e\u9875\u4e2d\u6267\u884c\u64cd\u4f5c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"chrome.tabs.query({}, async (tabs) => {\n  for (let tab of tabs) {\n    if (tab.url.startsWith('http')) {\n      await chrome.scripting.executeScript({\n        target: { tabId: tab.id },\n        func: () => {\n          console.log('\u5728\u6807\u7b7e\u9875\u4e2d\u6267\u884c');\n        }\n      });\n    }\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b3-\u6807\u7b7e\u9875\u7ba1\u7406\u5668",children:"\u793a\u4f8b3: \u6807\u7b7e\u9875\u7ba1\u7406\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u83b7\u53d6\u6240\u6709\u6807\u7b7e\u9875\u5e76\u5206\u7ec4\u663e\u793a\nchrome.tabs.query({}, (tabs) => {\n  let windows = {};\n  tabs.forEach(tab => {\n    if (!windows[tab.windowId]) {\n      windows[tab.windowId] = [];\n    }\n    windows[tab.windowId].push({\n      id: tab.id,\n      title: tab.title,\n      url: tab.url,\n      active: tab.active\n    });\n  });\n  console.log('\u6309\u7a97\u53e3\u5206\u7ec4\u7684\u6807\u7b7e\u9875:', windows);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b4-\u81ea\u52a8\u5237\u65b0\u6807\u7b7e\u9875",children:"\u793a\u4f8b4: \u81ea\u52a8\u5237\u65b0\u6807\u7b7e\u9875"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u6bcf30\u79d2\u5237\u65b0\u4e00\u6b21\u7279\u5b9aURL\u7684\u6807\u7b7e\u9875\nsetInterval(() => {\n  chrome.tabs.query({url: "https://example.com/*"}, (tabs) => {\n    tabs.forEach(tab => {\n      chrome.tabs.reload(tab.id);\n    });\n  });\n}, 30000);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e94\u6ce8\u610f\u4e8b\u9879",children:"\u4e94\u3001\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6743\u9650\u8981\u6c42"}),": \u8bbf\u95ee ",(0,t.jsx)(n.code,{children:"tab.url"})," \u548c ",(0,t.jsx)(n.code,{children:"tab.title"})," \u9700\u8981 ",(0,t.jsx)(n.code,{children:"tabs"})," \u6743\u9650\u6216\u76f8\u5e94\u7684 ",(0,t.jsx)(n.code,{children:"host_permissions"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5f02\u6b65\u64cd\u4f5c"}),": \u5927\u591a\u6570\u65b9\u6cd5\u90fd\u662f\u5f02\u6b65\u7684,\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u6216 Promise"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Manifest V3"}),": \u67d0\u4e9b API \u5df2\u88ab\u66ff\u6362\u6216\u5e9f\u5f03,\u6ce8\u610f\u7248\u672c\u517c\u5bb9\u6027"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6027\u80fd\u8003\u8651"}),": \u6279\u91cf\u64cd\u4f5c\u6807\u7b7e\u9875\u65f6\u6ce8\u610f\u6027\u80fd\u5f71\u54cd"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5b89\u5168\u9650\u5236"}),": \u65e0\u6cd5\u64cd\u4f5c ",(0,t.jsx)(n.code,{children:"chrome://"})," \u7b49\u7279\u6b8a\u9875\u9762"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u4e9b\u662f ",(0,t.jsx)(n.code,{children:"chrome.tabs"})," API \u7684\u4e3b\u8981\u7528\u6cd5,\u53ef\u4ee5\u6ee1\u8db3\u5927\u90e8\u5206\u6807\u7b7e\u9875\u64cd\u4f5c\u9700\u6c42\u3002\u6839\u636e\u5177\u4f53\u573a\u666f\u9009\u62e9\u5408\u9002\u7684\u65b9\u6cd5\u5373\u53ef\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>o});var s=a(6540);const t={},r=s.createContext(t);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);