---
id: node1
permalink: /node/intro11
title: 'ğŸ”µnpm æ•™ç¨‹'
---

# npm å®Œå…¨ä½¿ç”¨æ•™ç¨‹ï¼ˆ2025æœ€æ–°ç‰ˆï¼‰

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» npmï¼ˆNode Package Managerï¼‰çš„å®Œæ•´ä½¿ç”¨æ–¹æ³•ï¼Œä»å…¥é—¨åˆ°é«˜çº§ç‰¹æ€§ï¼Œå…¨éƒ¨é…æœ‰çœŸå®å¯è¿è¡Œçš„ç¤ºä¾‹ã€‚

## 1. npm æ˜¯ä»€ä¹ˆï¼Ÿ

npm æ˜¯å…¨çƒæœ€å¤§çš„ JavaScript åŒ…ç®¡ç†ç³»ç»Ÿï¼Œéš Node.js ä¸€èµ·å®‰è£…ã€‚ç›®å‰ï¼ˆ2025å¹´ï¼‰æœ€æ–°ç‰ˆæœ¬ä¸º **npm 10.x**ï¼ˆNode.js 20+ è‡ªå¸¦ï¼‰æˆ– **npm 11.x**ï¼ˆNode.js 22+ï¼‰ã€‚

å®˜æ–¹ç½‘ç«™ï¼šhttps://www.npmjs.com  
å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.npmjs.com

## 2. åˆå§‹åŒ–é¡¹ç›®

```bash
# åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹
mkdir my-project
cd my-project

# åˆå§‹åŒ– package.jsonï¼ˆæ¨èäº¤äº’å¼ï¼‰
npm init

# å¿«é€Ÿåˆå§‹åŒ–ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
npm init -y    # æˆ– npm init --yes
```

ç”Ÿæˆçš„ `package.json` ç¤ºä¾‹ï¼š

```json
{
  "name": "my-project",
  "version": "1.0.0",
  "description": "ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "node index.js"
  },
  "keywords": ["demo", "example"],
  "author": "å¼ ä¸‰ <zhangsan@example.com>",
  "license": "MIT"
}
```

## 3. å®‰è£…åŒ…ï¼ˆé‡ç‚¹ï¼‰

### 3.1 æœ¬åœ°å®‰è£…ï¼ˆå¼€å‘å’Œç”Ÿäº§ä¾èµ–ï¼‰

```bash
# å®‰è£…åˆ° dependenciesï¼ˆç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼‰
npm install lodash

# å®‰è£…åˆ° devDependenciesï¼ˆä»…å¼€å‘éœ€è¦ï¼Œå¦‚æµ‹è¯•å·¥å…·ï¼‰
npm install jest --save-dev
# æˆ–ç®€å†™
npm install jest -D

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
npm install lodash@4.17.21

# å®‰è£…æœ€æ–°ä¸»ç‰ˆæœ¬ï¼ˆ^çº¦æŸï¼‰
npm install express@latest

# å®‰è£…ç²¾ç¡®ç‰ˆæœ¬ï¼ˆé”æ­»ç‰ˆæœ¬ï¼‰
npm install axios@1.7.2 --save-exact
# æˆ–ä½¿ç”¨é…ç½®è‡ªåŠ¨åŠ  ~
npm config set save-exact true
```

### 3.2 å…¨å±€å®‰è£…ï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰

```bash
# å…¨å±€å®‰è£…ï¼ˆå¦‚åˆ›å»º React é¡¹ç›®å·¥å…·ï¼‰
npm install -g create-vite
npm install -g pnpm    # å®‰è£… pnpm
npm install -g serve   # é™æ€æœåŠ¡å™¨
```


## 4. å¸¸ç”¨å‘½ä»¤å¤§å…¨

| å‘½ä»¤                           | è¯´æ˜                                     | ç¤ºä¾‹                                 |
|--------------------------------|------------------------------------------|--------------------------------------|
| `npm install` æˆ– `npm i`       | å®‰è£… package.json ä¸­æ‰€æœ‰ä¾èµ–             | npm i                                |
| `npm ci`                       | å¹²å‡€å®‰è£…ï¼ˆç”¨äº CI/CDï¼Œä¸¥æ ¼æŒ‰ lock æ–‡ä»¶ï¼‰| npm ci                               |
| `npm install <pkg>`            | å®‰è£…åŒ…å¹¶ä¿å­˜åˆ° dependencies              | npm i lodash                         |
| `npm install <pkg> -D`         | å®‰è£…åˆ° devDependencies                   | npm i -D jest                        |
| `npm uninstall <pkg>`          | å¸è½½åŒ…                                   | npm uninstall lodash                 |
| `npm update`                   | æ›´æ–°æ‰€æœ‰ä¾èµ–åˆ°å…è®¸çš„æœ€æ–°ç‰ˆæœ¬             | npm update                           |
| `npm update <pkg>`             | æ›´æ–°æŒ‡å®šåŒ…                               | npm update express                   |
| `npm outdated`                 | æŸ¥çœ‹æœ‰å“ªäº›åŒ…å¯ä»¥æ›´æ–°                     | npm outdated                         |
| `npm list` æˆ– `npm ls`         | æŸ¥çœ‹å·²å®‰è£…çš„ä¾èµ–æ ‘                       | npm ls                               |
| `npm run <script>`             | è¿è¡Œ scripts ä¸­å®šä¹‰çš„å‘½ä»¤                | npm run dev                          |
| `npm exec <cmd>` æˆ– `npx`      | ä¸´æ—¶æ‰§è¡ŒåŒ…ä¸­çš„å‘½ä»¤                       | npx create-vite@latest my-app        |

## 5. scripts è„šæœ¬ä½¿ç”¨ï¼ˆéå¸¸é‡è¦ï¼‰

åœ¨ `package.json` ä¸­å®šä¹‰ï¼š

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "jest",
    "lint": "eslint src --ext .js,.ts,.vue",
    "format": "prettier --write .",
    "start": "node server.js",
    "prepare": "husky install"  // git hooks
  }
}
```

å¸¸ç”¨ç»„åˆè„šæœ¬ç¤ºä¾‹ï¼š

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "build:prod": "vite build --mode production",
    "lint:fix": "eslint src --fix",
    "type-check": "vue-tsc --noEmit",
    "test": "jest",
    "test:watch": "jest --watch",
    "clean": "rimraf dist node_modules/.cache"
  }
}
```

æ‰§è¡Œæ–¹å¼ï¼š

```bash
npm run dev
npm test
npm run build
```

## 6. npx çš„å¼ºå¤§ç”¨æ³•

npx æ˜¯ npm 5.2+ è‡ªå¸¦çš„ä¸´æ—¶æ‰§è¡Œå·¥å…·ï¼Œæ— éœ€å…¨å±€å®‰è£…ã€‚

```bash
# åˆ›å»ºé¡¹ç›®ï¼ˆæœ€å¸¸ç”¨ï¼‰
npx create-react-app my-app
npx create-vite@latest my-vue-app -- --template vue-ts
npx create-next-app@latest

# ä¸´æ—¶è¿è¡ŒæŸä¸ªå·¥å…·
npx cowsay "Hello npm!"
npx tsc --init
npx eslint --init

# æ‰§è¡Œæœ¬åœ°é¡¹ç›®ä¸­çš„å‘½ä»¤ï¼ˆæ¨èæ›¿ä»£ ./node_modules/.bin/xxxï¼‰
npx vite
npx jest --version
```

## 7. package-lock.json å’Œ npm shrinkwrap

- `package-lock.json`ï¼šè‡ªåŠ¨ç”Ÿæˆï¼Œè®°å½•å®é™…å®‰è£…çš„å®Œæ•´ä¾èµ–æ ‘å’Œç‰ˆæœ¬
- æ°¸è¿œæäº¤åˆ° gitï¼ç¡®ä¿å›¢é˜Ÿå’Œ CI ç¯å¢ƒä¸€è‡´
- `npm ci` åªä¼šè¯»å– lock æ–‡ä»¶ï¼Œé€Ÿåº¦æ›´å¿«ã€æ›´ä¸¥æ ¼

## 8. å‘å¸ƒè‡ªå·±çš„åŒ…åˆ° npm

### æ­¥éª¤1ï¼šæ³¨å†Œè´¦å·
å» https://www.npmjs.com æ³¨å†Œ

### æ­¥éª¤2ï¼šç™»å½•ç»ˆç«¯
```bash
npm login
# è¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±
```

### æ­¥éª¤3ï¼šå‡†å¤‡åŒ…
ç¡®ä¿ `package.json` å…³é”®å­—æ®µæ­£ç¡®ï¼š

```json
{
  "name": "my-awesome-lib",
  "version": "1.0.0",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "files": ["dist", "README.md"],
  "publishConfig": {
    "access": "public"  // ç»„ç»‡ä½œç”¨åŸŸåŒ…ç”¨ "restricted"
  }
}
```

### æ­¥éª¤4ï¼šå‘å¸ƒ
```bash
npm publish
# å‘å¸ƒæ–°ç‰ˆæœ¬ï¼ˆå¿…é¡»ä¿®æ”¹ versionï¼‰
npm version patch    # 1.0.0 â†’ 1.0.1
npm version minor    # 1.0.0 â†’ 1.1.0
npm version major    # 1.0.0 â†’ 2.0.0
git push && git push --tags
npm publish
```

## 9. å¸¸ç”¨é…ç½®ï¼ˆ~/.npmrc æˆ–é¡¹ç›® .npmrcï¼‰

```ini
# è®¾ç½®å›½å†…é•œåƒï¼ˆåŠ é€Ÿä¸‹è½½ï¼‰
registry=https://registry.npmmirror.com

# æˆ–è€…ä½¿ç”¨å®˜æ–¹æ·˜å®é•œåƒ
registry=https://registry.npmjs.org/

# ç²¾ç¡®å®‰è£…ï¼ˆæ¨èï¼‰
save-exact=true

# è‡ªåŠ¨å®‰è£… peerDependenciesï¼ˆnpm v7+ï¼‰
auto-install-peers=true

# ä¸¥æ ¼ä½¿ç”¨ lock æ–‡ä»¶
legacy-peer-deps=false
```

## 10. æ¨èçš„æœ€ä½³å®è·µï¼ˆ2025ï¼‰

```bash
# 1. ä½¿ç”¨ npm ci è€Œä¸æ˜¯ npm installï¼ˆCI/CDï¼‰
npm ci

# 2. ä½¿ç”¨ npx æ›¿ä»£å…¨å±€å®‰è£…
npx create-vite@latest

# 3. ä½¿ç”¨ npm workspaces ç®¡ç† monorepo
# package.json
{
  "workspaces": ["packages/*", "apps/*"]
}

# 4. æ¨èä½¿ç”¨ pnpm æˆ– bunï¼ˆæ›´å¿«ã€æ›´çœç£ç›˜ï¼‰
# pnpm å®‰è£…ï¼šnpm install -g pnpm
# bun å®‰è£…ï¼šcurl -fsSL https://bun.sh/install | bash
```

## ç»“è¯­

æŒæ¡ä»¥ä¸Šå†…å®¹ï¼Œä½ å·²ç»å®Œå…¨ç²¾é€š npm çš„æ—¥å¸¸ä½¿ç”¨å’Œé«˜çº§ç‰¹æ€§äº†ï¼

å¸¸ç”¨å¿«æ·å‘½ä»¤é€ŸæŸ¥ï¼š

```bash
npm i                 # å®‰è£…æ‰€æœ‰ä¾èµ–
npm i lodash          # å®‰è£…åŒ…
npm i -D vite         # å¼€å‘ä¾èµ–
npm run dev           # è¿è¡Œå¼€å‘è„šæœ¬
npx vite              # ä¸´æ—¶æ‰§è¡Œ
npm outdated          # æ£€æŸ¥æ›´æ–°
npm update            # æ›´æ–°ä¾èµ–
npm publish           # å‘å¸ƒåŒ…
```

