---
id: intro9
permalink: /pw/intro9
title: 'ğŸ’œroute.fulfill()'
---

`route.fulfill()` æ˜¯ Playwright è·¯ç”±æ‹¦æˆªåŠŸèƒ½ä¸­çš„å¦ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒå…è®¸ä½ å®Œå…¨æ›¿ä»£åŸå§‹è¯·æ±‚çš„å“åº”ï¼Œè€Œä¸æ˜¯è®©è¯·æ±‚ç»§ç»­åˆ°å®é™…çš„æœåŠ¡å™¨ã€‚è¿™å¯¹äºæ¨¡æ‹ŸAPIå“åº”ã€æµ‹è¯•é”™è¯¯åœºæ™¯ã€ç¦»çº¿æµ‹è¯•ç­‰éå¸¸æœ‰ç”¨ã€‚

## åŸºæœ¬æ¦‚å¿µ

å½“ä½¿ç”¨ `route.fulfill()` æ—¶ï¼ŒPlaywright ä¸ä¼šå‘é€å®é™…çš„ç½‘ç»œè¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ä½ æä¾›çš„æ¨¡æ‹Ÿå“åº”ã€‚è¿™æ ·å¯ä»¥ï¼š
- å®Œå…¨æ§åˆ¶å“åº”å†…å®¹
- æ¨¡æ‹Ÿå„ç§æœåŠ¡å™¨çŠ¶æ€
- é¿å…ä¾èµ–å¤–éƒ¨æœåŠ¡
- åŠ å¿«æµ‹è¯•æ‰§è¡Œé€Ÿåº¦

## åŸºç¡€ç”¨æ³•

### 1. ç®€å•çš„å“åº”æ›¿æ¢

```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    context = browser.new_context()
    page = context.new_page()
    
    def handle_route(route, request):
        if "/api/user" in request.url:
            # è¿”å›æ¨¡æ‹Ÿçš„ç”¨æˆ·æ•°æ®
            route.fulfill(
                status=200,
                headers={"Content-Type": "application/json"},
                body='{"id": 123, "name": "Test User", "email": "test@example.com"}'
            )
        else:
            route.continue_()
    
    page.route("**/*", handle_route)
    page.goto("https://example.com")
    
    browser.close()
```

### 2. è¿”å›é™æ€æ–‡ä»¶å†…å®¹

```python
def handle_route(route, request):
    if request.url.endswith('.css'):
        # è¿”å›è‡ªå®šä¹‰CSS
        css_content = """
        body { background-color: #f0f0f0; }
        .test-element { color: red; }
        """
        route.fulfill(
            status=200,
            headers={"Content-Type": "text/css"},
            body=css_content
        )
    else:
        route.continue_()
```

## å®Œæ•´çš„å‚æ•°åˆ—è¡¨

`route.fulfill()` æ”¯æŒä»¥ä¸‹å‚æ•°ï¼š

```python
route.fulfill(
    status=200,                              # HTTPçŠ¶æ€ç 
    headers={"Content-Type": "application/json"},  # å“åº”å¤´
    body="response content",                 # å“åº”ä½“ï¼ˆå­—ç¬¦ä¸²ï¼‰
    body_bytes=b"binary content",           # å“åº”ä½“ï¼ˆå­—èŠ‚ï¼‰
    path="/path/to/file.json",              # ä»æ–‡ä»¶è¯»å–å“åº”
    content_type="application/json",         # å†…å®¹ç±»å‹ï¼ˆç®€åŒ–è®¾ç½®ï¼‰
    response=original_response               # åŸºäºç°æœ‰å“åº”ä¿®æ”¹
)
```

## é«˜çº§ç”¨æ³•

### 1. æ¨¡æ‹ŸAPIå“åº”

```python
import json
from datetime import datetime

class APISimulator:
    def __init__(self):
        self.users = [
            {"id": 1, "name": "Alice", "email": "alice@example.com"},
            {"id": 2, "name": "Bob", "email": "bob@example.com"},
            {"id": 3, "name": "Charlie", "email": "charlie@example.com"}
        ]
        self.posts = [
            {"id": 1, "title": "First Post", "author_id": 1, "content": "Hello World!"},
            {"id": 2, "title": "Second Post", "author_id": 2, "content": "This is a test."}
        ]
    
    def handle_route(self, route, request):
        url = request.url
        method = request.method
        
        # å¤„ç†ç”¨æˆ·ç›¸å…³API
        if "/api/users" in url:
            if method == "GET":
                if url.endswith("/users"):
                    # è¿”å›æ‰€æœ‰ç”¨æˆ·
                    route.fulfill(
                        status=200,
                        headers={"Content-Type": "application/json"},
                        body=json.dumps(self.users)
                    )
                else:
                    # è¿”å›ç‰¹å®šç”¨æˆ·
                    user_id = int(url.split("/")[-1])
                    user = next((u for u in self.users if u["id"] == user_id), None)
                    if user:
                        route.fulfill(
                            status=200,
                            headers={"Content-Type": "application/json"},
                            body=json.dumps(user)
                        )
                    else:
                        route.fulfill(
                            status=404,
                            headers={"Content-Type": "application/json"},
                            body='{"error": "User not found"}'
                        )
            
            elif method == "POST":
                # åˆ›å»ºæ–°ç”¨æˆ·
                try:
                    new_user_data = json.loads(request.post_data or "{}")
                    new_user = {
                        "id": len(self.users) + 1,
                        "name": new_user_data.get("name"),
                        "email": new_user_data.get("email")
                    }
                    self.users.append(new_user)
                    
                    route.fulfill(
                        status=201,
                        headers={"Content-Type": "application/json"},
                        body=json.dumps(new_user)
                    )
                except json.JSONDecodeError:
                    route.fulfill(
                        status=400,
                        headers={"Content-Type": "application/json"},
                        body='{"error": "Invalid JSON"}'
                    )
        
        # å¤„ç†æ–‡ç« API
        elif "/api/posts" in url:
            route.fulfill(
                status=200,
                headers={"Content-Type": "application/json"},
                body=json.dumps(self.posts)
            )
        
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
simulator = APISimulator()

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    context = browser.new_context()
    page = context.new_page()
    
    page.route("**/*", simulator.handle_route)
    
    # æµ‹è¯•é¡µé¢ç°åœ¨å¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿçš„API
    page.goto("https://your-app.com")
    
    browser.close()
```

### 2. æ¨¡æ‹Ÿä¸åŒçš„HTTPçŠ¶æ€ç 

```python
class HTTPStatusSimulator:
    def __init__(self):
        self.request_count = 0
    
    def handle_route(self, route, request):
        self.request_count += 1
        
        if "/api/flaky-endpoint" in request.url:
            # æ¨¡æ‹Ÿä¸ç¨³å®šçš„æœåŠ¡
            if self.request_count % 3 == 0:
                # æ¯ç¬¬3ä¸ªè¯·æ±‚å¤±è´¥
                route.fulfill(
                    status=500,
                    headers={"Content-Type": "application/json"},
                    body='{"error": "Internal Server Error", "code": "SERVER_ERROR"}'
                )
            elif self.request_count % 5 == 0:
                # æ¯ç¬¬5ä¸ªè¯·æ±‚è¶…æ—¶
                route.fulfill(
                    status=408,
                    headers={"Content-Type": "application/json"},
                    body='{"error": "Request Timeout", "code": "TIMEOUT"}'
                )
            else:
                # æ­£å¸¸å“åº”
                route.fulfill(
                    status=200,
                    headers={"Content-Type": "application/json"},
                    body='{"status": "success", "data": "Everything is fine"}'
                )
        
        elif "/api/auth" in request.url:
            # æ¨¡æ‹Ÿè®¤è¯å¤±è´¥
            auth_header = request.headers.get("Authorization", "")
            if not auth_header or "Bearer valid-token" not in auth_header:
                route.fulfill(
                    status=401,
                    headers={"Content-Type": "application/json"},
                    body='{"error": "Unauthorized", "code": "INVALID_TOKEN"}'
                )
            else:
                route.fulfill(
                    status=200,
                    headers={"Content-Type": "application/json"},
                    body='{"user": "authenticated_user", "role": "admin"}'
                )
        
        elif "/api/rate-limited" in request.url:
            # æ¨¡æ‹Ÿé™æµ
            route.fulfill(
                status=429,
                headers={
                    "Content-Type": "application/json",
                    "Retry-After": "60"
                },
                body='{"error": "Too Many Requests", "retry_after": 60}'
            )
        
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
status_simulator = HTTPStatusSimulator()
page.route("**/api/**", status_simulator.handle_route)
```

### 3. åŸºäºæ–‡ä»¶çš„å“åº”

```python
import os
import mimetypes

class FileBasedMockServer:
    def __init__(self, mock_dir="./mock_responses"):
        self.mock_dir = mock_dir
        self.ensure_mock_dir()
        self.create_sample_files()
    
    def ensure_mock_dir(self):
        if not os.path.exists(self.mock_dir):
            os.makedirs(self.mock_dir)
    
    def create_sample_files(self):
        # åˆ›å»ºç¤ºä¾‹æ¨¡æ‹Ÿæ–‡ä»¶
        samples = {
            "users.json": '{"users": [{"id": 1, "name": "John"}, {"id": 2, "name": "Jane"}]}',
            "products.json": '{"products": [{"id": 1, "name": "Laptop", "price": 999}]}',
            "error_500.json": '{"error": "Internal Server Error", "message": "Something went wrong"}',
            "styles.css": "body { font-family: Arial; background: #f0f0f0; }",
            "index.html": "<html><body><h1>Mock Response</h1></body></html>"
        }
        
        for filename, content in samples.items():
            filepath = os.path.join(self.mock_dir, filename)
            if not os.path.exists(filepath):
                with open(filepath, 'w', encoding='utf-8') as f:
                    f.write(content)
    
    def handle_route(self, route, request):
        url = request.url
        
        # æ˜ å°„URLåˆ°æ–‡ä»¶
        url_to_file = {
            "/api/users": "users.json",
            "/api/products": "products.json",
            "/api/error-test": "error_500.json",
            "/styles.css": "styles.css",
            "/mock-page": "index.html"
        }
        
        # æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶
        for url_pattern, filename in url_to_file.items():
            if url_pattern in url:
                filepath = os.path.join(self.mock_dir, filename)
                
                if os.path.exists(filepath):
                    # æ ¹æ®æ–‡ä»¶æ‰©å±•åç¡®å®šå†…å®¹ç±»å‹
                    content_type, _ = mimetypes.guess_type(filepath)
                    if not content_type:
                        content_type = "text/plain"
                    
                    # ç‰¹æ®Šå¤„ç†é”™è¯¯æ–‡ä»¶
                    status_code = 500 if "error" in filename else 200
                    
                    route.fulfill(
                        status=status_code,
                        headers={"Content-Type": content_type},
                        path=filepath
                    )
                    return
        
        # å¦‚æœæ²¡æœ‰åŒ¹é…çš„æ–‡ä»¶ï¼Œç»§ç»­åŸå§‹è¯·æ±‚
        route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
mock_server = FileBasedMockServer()
page.route("**/*", mock_server.handle_route)
```

### 4. åŠ¨æ€å“åº”ç”Ÿæˆ

```python
import random
import time
from datetime import datetime

class DynamicResponseGenerator:
    def __init__(self):
        self.session_data = {}
    
    def generate_user_data(self):
        names = ["Alice", "Bob", "Charlie", "Diana", "Eve"]
        domains = ["example.com", "test.com", "demo.com"]
        
        return {
            "id": random.randint(1, 1000),
            "name": random.choice(names),
            "email": f"{random.choice(names).lower()}@{random.choice(domains)}",
            "created_at": datetime.now().isoformat(),
            "last_active": datetime.now().isoformat(),
            "score": random.randint(0, 100)
        }
    
    def generate_analytics_data(self):
        return {
            "timestamp": datetime.now().isoformat(),
            "page_views": random.randint(100, 1000),
            "unique_visitors": random.randint(50, 500),
            "bounce_rate": round(random.uniform(0.2, 0.8), 2),
            "conversion_rate": round(random.uniform(0.01, 0.1), 3),
            "performance": {
                "load_time": round(random.uniform(0.5, 3.0), 2),
                "render_time": round(random.uniform(0.1, 1.0), 2)
            }
        }
    
    def handle_route(self, route, request):
        url = request.url
        
        if "/api/random-user" in url:
            # ç”Ÿæˆéšæœºç”¨æˆ·æ•°æ®
            user_data = self.generate_user_data()
            route.fulfill(
                status=200,
                headers={
                    "Content-Type": "application/json",
                    "X-Generated-At": datetime.now().isoformat()
                },
                body=json.dumps(user_data)
            )
        
        elif "/api/analytics" in url:
            # æ¨¡æ‹Ÿå®æ—¶åˆ†ææ•°æ®
            analytics = self.generate_analytics_data()
            route.fulfill(
                status=200,
                headers={
                    "Content-Type": "application/json",
                    "Cache-Control": "no-cache"
                },
                body=json.dumps(analytics)
            )
        
        elif "/api/slow-response" in url:
            # æ¨¡æ‹Ÿæ…¢å“åº”
            time.sleep(2)  # æ³¨æ„ï¼šè¿™ä¼šé˜»å¡ï¼Œå®é™…ä½¿ç”¨ä¸­è€ƒè™‘å¼‚æ­¥
            route.fulfill(
                status=200,
                headers={"Content-Type": "application/json"},
                body='{"message": "This was a slow response", "delay": "2 seconds"}'
            )
        
        elif "/api/conditional" in url:
            # åŸºäºè¯·æ±‚å‚æ•°çš„æ¡ä»¶å“åº”
            if "error=true" in url:
                route.fulfill(
                    status=400,
                    headers={"Content-Type": "application/json"},
                    body='{"error": "Simulated error condition"}'
                )
            elif "empty=true" in url:
                route.fulfill(
                    status=200,
                    headers={"Content-Type": "application/json"},
                    body='{"data": [], "total": 0}'
                )
            else:
                route.fulfill(
                    status=200,
                    headers={"Content-Type": "application/json"},
                    body='{"data": ["item1", "item2", "item3"], "total": 3}'
                )
        
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
generator = DynamicResponseGenerator()
page.route("**/api/**", generator.handle_route)
```

### 5. å“åº”ä¿®æ”¹å’Œå¢å¼º

```python
class ResponseEnhancer:
    def __init__(self):
        self.request_id_counter = 0
    
    def handle_route(self, route, request):
        self.request_id_counter += 1
        
        if "/api/" in request.url:
            # å¯¹æ‰€æœ‰APIè¯·æ±‚æ·»åŠ é€šç”¨çš„å“åº”å¤´å’Œæ•°æ®
            
            # é¦–å…ˆè·å–åŸå§‹å“åº”ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰
            # æ³¨æ„ï¼šè¿™é‡Œæ¼”ç¤ºçš„æ˜¯å®Œå…¨æ›¿æ¢å“åº”çš„æ–¹å¼
            
            if "/api/enhanced" in request.url:
                # åˆ›å»ºå¢å¼ºçš„å“åº”
                enhanced_response = {
                    "meta": {
                        "request_id": f"req_{self.request_id_counter}",
                        "timestamp": datetime.now().isoformat(),
                        "version": "1.0",
                        "server": "mock-server"
                    },
                    "data": {
                        "message": "This is an enhanced response",
                        "features": ["caching", "versioning", "tracking"]
                    },
                    "links": {
                        "self": request.url,
                        "documentation": "https://api-docs.example.com"
                    }
                }
                
                route.fulfill(
                    status=200,
                    headers={
                        "Content-Type": "application/json",
                        "X-Request-ID": f"req_{self.request_id_counter}",
                        "X-API-Version": "1.0",
                        "X-Rate-Limit-Remaining": "100",
                        "Cache-Control": "max-age=300"
                    },
                    body=json.dumps(enhanced_response, indent=2)
                )
            else:
                route.continue_()
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
enhancer = ResponseEnhancer()
page.route("**/*", enhancer.handle_route)
```

### 6. å›¾ç‰‡å’ŒäºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†

```python
import base64

class BinaryResponseHandler:
    def __init__(self):
        # 1x1åƒç´ çš„é€æ˜PNGå›¾ç‰‡çš„base64ç¼–ç 
        self.tiny_png = base64.b64decode(
            'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=='
        )
    
    def handle_route(self, route, request):
        url = request.url
        
        if any(ext in url for ext in ['.png', '.jpg', '.jpeg', '.gif']):
            # è¿”å›å ä½å›¾ç‰‡
            route.fulfill(
                status=200,
                headers={"Content-Type": "image/png"},
                body_bytes=self.tiny_png
            )
        
        elif url.endswith('.pdf'):
            # è¿”å›ç®€å•çš„PDFå†…å®¹
            pdf_content = b"%PDF-1.4\n1 0 obj\n<<\n/Type /Catalog\n/Pages 2 0 R\n>>\nendobj\n2 0 obj\n<<\n/Type /Pages\n/Kids [3 0 R]\n/Count 1\n>>\nendobj\n3 0 obj\n<<\n/Type /Page\n/Parent 2 0 R\n/MediaBox [0 0 612 792]\n>>\nendobj\nxref\n0 4\n0000000000 65535 f \n0000000009 00000 n \n0000000074 00000 n \n0000000120 00000 n \ntrailer\n<<\n/Size 4\n/Root 1 0 R\n>>\nstartxref\n174\n%%EOF"
            
            route.fulfill(
                status=200,
                headers={
                    "Content-Type": "application/pdf",
                    "Content-Disposition": "inline; filename=test.pdf"
                },
                body_bytes=pdf_content
            )
        
        elif url.endswith('.zip'):
            # è¿”å›ç©ºçš„ZIPæ–‡ä»¶
            empty_zip = b'PK\x05\x06\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
            
            route.fulfill(
                status=200,
                headers={
                    "Content-Type": "application/zip",
                    "Content-Disposition": "attachment; filename=empty.zip"
                },
                body_bytes=empty_zip
            )
        
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
binary_handler = BinaryResponseHandler()
page.route("**/*", binary_handler.handle_route)
```

## é”™è¯¯å¤„ç†å’Œè°ƒè¯•

```python
class SafeRouteHandler:
    def __init__(self):
        self.error_count = 0
    
    def handle_route(self, route, request):
        try:
            if "/api/test" in request.url:
                # æ¨¡æ‹Ÿå¯èƒ½å¤±è´¥çš„æ“ä½œ
                data = self._process_request(request)
                
                route.fulfill(
                    status=200,
                    headers={"Content-Type": "application/json"},
                    body=json.dumps(data)
                )
            else:
                route.continue_()
                
        except Exception as e:
            self.error_count += 1
            print(f"Routeå¤„ç†é”™è¯¯ #{self.error_count}: {e}")
            
            # è¿”å›é”™è¯¯å“åº”è€Œä¸æ˜¯è®©æ•´ä¸ªæµ‹è¯•å¤±è´¥
            route.fulfill(
                status=500,
                headers={"Content-Type": "application/json"},
                body=json.dumps({
                    "error": "Mock server error",
                    "message": str(e),
                    "error_count": self.error_count
                })
            )
    
    def _process_request(self, request):
        # æ¨¡æ‹Ÿä¸€äº›å¯èƒ½å‡ºé”™çš„å¤„ç†
        if "trigger_error" in request.url:
            raise ValueError("Simulated processing error")
        
        return {"status": "success", "processed_at": datetime.now().isoformat()}

# ä½¿ç”¨ç¤ºä¾‹
safe_handler = SafeRouteHandler()
page.route("**/*", safe_handler.handle_route)
```

## æ€§èƒ½ä¼˜åŒ–

```python
import hashlib
from functools import lru_cache

class OptimizedMockServer:
    def __init__(self):
        self.response_cache = {}
    
    @lru_cache(maxsize=100)
    def _generate_cached_response(self, cache_key):
        """ä½¿ç”¨LRUç¼“å­˜æ¥é¿å…é‡å¤ç”Ÿæˆç›¸åŒçš„å“åº”"""
        return {
            "timestamp": datetime.now().isoformat(),
            "data": f"Cached response for {cache_key}",
            "cache_hit": True
        }
    
    def _get_cache_key(self, request):
        """ä¸ºè¯·æ±‚ç”Ÿæˆç¼“å­˜é”®"""
        key_parts = [
            request.method,
            request.url,
            request.post_data or ""
        ]
        return hashlib.md5("|".join(key_parts).encode()).hexdigest()
    
    def handle_route(self, route, request):
        if "/api/cached" in request.url:
            cache_key = self._get_cache_key(request)
            
            # æ£€æŸ¥å†…å­˜ç¼“å­˜
            if cache_key in self.response_cache:
                cached_response = self.response_cache[cache_key]
                route.fulfill(
                    status=200,
                    headers={
                        "Content-Type": "application/json",
                        "X-Cache": "HIT"
                    },
                    body=json.dumps(cached_response)
                )
                return
            
            # ç”Ÿæˆæ–°å“åº”å¹¶ç¼“å­˜
            response_data = self._generate_cached_response(cache_key)
            self.response_cache[cache_key] = response_data
            
            route.fulfill(
                status=200,
                headers={
                    "Content-Type": "application/json",
                    "X-Cache": "MISS"
                },
                body=json.dumps(response_data)
            )
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
optimized_server = OptimizedMockServer()
page.route("**/api/**", optimized_server.handle_route)
```

## å®é™…åº”ç”¨åœºæ™¯

### 1. å®Œæ•´çš„æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿ

```python
class TestEnvironmentSimulator:
    def __init__(self, config_file="test_config.json"):
        self.config = self._load_config(config_file)
        self.setup_test_data()
    
    def _load_config(self, config_file):
        # åŠ è½½æµ‹è¯•é…ç½®
        default_config = {
            "api_delay": 0,
            "error_rate": 0,
            "features": {
                "user_management": True,
                "analytics": True,
                "notifications": False
            }
        }
        return default_config
    
    def setup_test_data(self):
        # è®¾ç½®æµ‹è¯•æ•°æ®
        pass
    
    def handle_route(self, route, request):
        # æ ¹æ®é…ç½®æ¨¡æ‹Ÿä¸åŒçš„ç¯å¢ƒè¡Œä¸º
        url = request.url
        
        # æ·»åŠ å»¶è¿Ÿï¼ˆå¦‚æœé…ç½®äº†ï¼‰
        if self.config["api_delay"] > 0:
            time.sleep(self.config["api_delay"] / 1000.0)
        
        # æ¨¡æ‹Ÿé”™è¯¯ï¼ˆæ ¹æ®é”™è¯¯ç‡ï¼‰
        if random.random() < self.config["error_rate"]:
            route.fulfill(
                status=500,
                headers={"Content-Type": "application/json"},
                body='{"error": "Simulated random error"}'
            )
            return
        
        # æ ¹æ®åŠŸèƒ½å¼€å…³è¿”å›ä¸åŒçš„å“åº”
        if "/api/features" in url:
            route.fulfill(
                status=200,
                headers={"Content-Type": "application/json"},
                body=json.dumps(self.config["features"])
            )
        else:
            route.continue_()

# ä½¿ç”¨ç¤ºä¾‹
test_env = TestEnvironmentSimulator()
page.route("**/*", test_env.handle_route)
```

## æ³¨æ„äº‹é¡¹

1. **å“åº”å®Œæ•´æ€§**ï¼šä½¿ç”¨ `fulfill()` æ—¶å¿…é¡»æä¾›å®Œæ•´çš„å“åº”ï¼ŒåŒ…æ‹¬çŠ¶æ€ç å’Œé€‚å½“çš„å¤´éƒ¨
2. **å†…å®¹ç±»å‹**ï¼šç¡®ä¿è®¾ç½®æ­£ç¡®çš„ `Content-Type` å¤´éƒ¨
3. **å­—ç¬¦ç¼–ç **ï¼šå¤„ç†éASCIIå­—ç¬¦æ—¶æ³¨æ„ç¼–ç é—®é¢˜
4. **å†…å­˜ä½¿ç”¨**ï¼šå¤§é‡ä½¿ç”¨ç¼“å­˜æ—¶æ³¨æ„å†…å­˜æ¶ˆè€—
5. **æµ‹è¯•éš”ç¦»**ï¼šç¡®ä¿ä¸åŒæµ‹è¯•ä¹‹é—´çš„æ¨¡æ‹Ÿæ•°æ®ä¸ä¼šç›¸äº’å½±å“
6. **æ€§èƒ½å½±å“**ï¼šå¤æ‚çš„å“åº”ç”Ÿæˆé€»è¾‘å¯èƒ½å½±å“æµ‹è¯•æ€§èƒ½

`route.fulfill()` æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œé€šè¿‡åˆç†ä½¿ç”¨å¯ä»¥åˆ›å»ºå®Œå…¨å¯æ§çš„æµ‹è¯•ç¯å¢ƒï¼Œæé«˜æµ‹è¯•çš„å¯é æ€§å’Œç‹¬ç«‹æ€§ã€‚