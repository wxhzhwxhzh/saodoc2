---
id: intro5
permalink: /pw/intro5
title: 'ğŸ’œDPå’Œpwæ··åˆç¼–ç¨‹'
---
# DrissionPageå’Œpwæ··åˆç¼–ç¨‹

æœ¬ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•å°† [DrissionPage](https://g1879.gitee.io/drissionpage/) ä¸ [Playwright](https://playwright.dev/python/) ç»“åˆä½¿ç”¨ï¼Œå®ç°æµè§ˆå™¨çš„æ··åˆè‡ªåŠ¨åŒ–æ§åˆ¶ã€‚

## ç¤ºä¾‹ä»£ç 

- æ··åˆç¼–ç¨‹ï¼Œæ‰“å¼€ç™¾åº¦å’Œbing

```python
#!/usr/bin/env python
# -*- coding:utf-8 -*-
# å¯¼å…¥åº“
from DrissionPage import Chromium, ChromiumOptions
from playwright.sync_api import sync_playwright

# åˆ›å»ºé…ç½®å¯¹è±¡
co = ChromiumOptions()

# åˆ›å»ºæµè§ˆå™¨å¯¹è±¡
browser = Chromium(co)
tab = browser.latest_tab

# è®¿é—®ç½‘é¡µ
tab.get("https://www.baidu.com/")
print(tab.title)

with sync_playwright() as p:
    # é€šè¿‡CDPè¿æ¥åˆ°DrissionPageå·²å¯åŠ¨çš„æµè§ˆå™¨
    pw_browser = p.chromium.connect_over_cdp(f"http://{browser.address}")
    default_context = pw_browser.contexts[0]

    if len(default_context.pages) > 0:
        page = default_context.pages[0]
        print("å·²è¿æ¥åˆ°ç°æœ‰é¡µé¢ï¼Œæ ‡é¢˜:", page.title())
    else:
        page = default_context.new_page()
        print("æ²¡æœ‰æ‰¾åˆ°ç°æœ‰é¡µé¢ï¼Œå·²æ–°å»ºä¸€ä¸ªã€‚")

    # åç»­æ“ä½œ
    page.goto("https://www.bing.com")
    print("é¡µé¢å·²å¯¼èˆªåˆ° bingï¼Œå½“å‰æ ‡é¢˜:", page.title())
    search_box = page.locator('#sb_form_q')
    search_box.fill('DrissionPage docs')
    search_box.press('Enter')
    print("æ“ä½œå®Œæˆï¼Œè¯·åœ¨æ‰‹åŠ¨æ‰“å¼€çš„æµè§ˆå™¨çª—å£ä¸­æŸ¥çœ‹ç»“æœã€‚")

print(browser.latest_tab.title)
input("æŒ‰å›è½¦é”®ç»§ç»­...")
```

- æ··åˆç¼–ç¨‹ï¼Œä¸Šä¸‹æ–‡å¤šå¼€ï¼Œå®ç°ä»£ç†ipåŠ¨æ€åˆ‡æ¢
```python
#!/usr/bin/env python
# -*- coding:utf-8 -*-
# å¯¼å…¥åº“
from DrissionPage import Chromium, ChromiumOptions
from playwright.sync_api import sync_playwright

# åˆ›å»ºé…ç½®å¯¹è±¡
co = ChromiumOptions()

# åˆ›å»ºæµè§ˆå™¨å¯¹è±¡
browser = Chromium(co)
tab = browser.latest_tab

# è®¿é—®ç½‘é¡µ
tab.get("https://www.baidu.com")
print(tab.title)

context_config={  
        "proxy":{
        "server": "socks5://222.59.173.105:44096",  #"server": "socks5://proxy.example.com:1080"
        # "username": "username",
        # "password": "password"
           
    },
    "geolocation": {'latitude': 37.7749, 'longitude': -122.4194},
    "permissions":['geolocation'] ,
    "timezone_id":'America/New_York',
    "locale":'en-US'    
}

# with sync_playwright() as p:

p=sync_playwright().start()
# é€šè¿‡CDPè¿æ¥åˆ°DrissionPageå·²å¯åŠ¨çš„æµè§ˆå™¨
pw_browser = p.chromium.connect_over_cdp(f"http://{browser.address}")
default_context = pw_browser.new_context(**context_config )
page = default_context.new_page()
page.goto("https://www.webcheck.cc")

print(browser.latest_tab.title)

input("æŒ‰å›è½¦é”®ç»§ç»­...")

```

## è¯´æ˜

- å…ˆç”¨ DrissionPage å¯åŠ¨ Chromium æµè§ˆå™¨å¹¶è®¿é—®ç™¾åº¦ã€‚
- å†ç”¨ Playwright é€šè¿‡ CDP åè®®è¿æ¥åˆ°åŒä¸€ä¸ªæµè§ˆå™¨å®ä¾‹ï¼Œå®ç°å¯¹åŒä¸€é¡µé¢çš„è¿›ä¸€æ­¥è‡ªåŠ¨åŒ–æ“ä½œã€‚
- ç¤ºä¾‹ä¸­åœ¨ Bing æœç´¢æ¡†è¾“å…¥å†…å®¹å¹¶å›è½¦ï¼Œæ“ä½œç»“æœå¯åœ¨æµè§ˆå™¨çª—å£ä¸­æŸ¥çœ‹ã€‚

## å‚è€ƒèµ„æ–™

- [DrissionPage å®˜æ–¹æ–‡æ¡£](https://g1879.gitee.io/drissionpage/)
- [Playwright Python å®˜æ–¹æ–‡æ¡£](https://playwright.dev/python/)
- [CDP åè®®ä»‹ç»](https://chromedevtools.github.io/devtools-protocol/)
