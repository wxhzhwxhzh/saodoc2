---
id: intro11
permalink: /pw/intro11
title: 'ğŸ’œpage.on()'
---

---

## Playwright Page çš„äº‹ä»¶ï¼ˆv1.52 å¯èƒ½æ”¯æŒçš„ï¼‰

ä»¥ä¸‹æ˜¯ `page.on(...)` é€šå¸¸èƒ½ç›‘å¬çš„ä¸€äº›äº‹ä»¶ï¼š

| äº‹ä»¶å                | äº‹ä»¶å‚æ•°ç±»å‹ / å›è°ƒæ”¶åˆ°çš„å¯¹è±¡     | è§¦å‘æ—¶æœº / è¯´æ˜                                                                         |
| ------------------ | -------------------- | --------------------------------------------------------------------------------- |
| `close`            | `Page`               | å½“é¡µé¢è¢«å…³é—­æ—¶è§¦å‘ ([Playwright][1])                                                       |
| `console`          | `ConsoleMessage`     | å½“é¡µé¢å†…éƒ¨æœ‰ `console.log` / `console.error` / `console.warn` ç­‰è¢«è°ƒç”¨æ—¶è§¦å‘ ([Playwright][1]) |
| `crash`            | â€”                    | é¡µé¢è¿›ç¨‹å´©æºƒï¼ˆcrashï¼‰æ—¶è§¦å‘ ([Playwright][1])                                                |
| `dialog`           | `Dialog`             | å½“é¡µé¢å¼¹å‡ºå¯¹è¯æ¡†ï¼ˆ`alert` / `prompt` / `confirm` / `beforeunload`ï¼‰æ—¶è§¦å‘ ([Playwright][1])    |
| `filechooser`      | `FileChooser`        | å½“é¡µé¢å°è¯•ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ ï¼ˆä¾‹å¦‚ç‚¹å‡» `<input type="file">`ï¼‰æ—¶è§¦å‘ ([Playwright][1])                      |
| `frameattached`    | `Frame`              | å½“æŸä¸ªå­ frame è¢«é™„åŠ ï¼ˆæ’å…¥ï¼‰åˆ°é¡µé¢ä¸­æ—¶è§¦å‘ ([Playwright][1])                                       |
| `framedetached`    | `Frame`              | å½“æŸä¸ªå­ frame ä»é¡µé¢ä¸­ç§»é™¤æ—¶è§¦å‘ ([Playwright ä¸­æ–‡ç½‘][2])                                        |
| `framenavigated`   | `Frame`              | å½“å·²æœ‰çš„ frame å¯¼èˆªåˆ°æ–°çš„ URLï¼ˆæˆ–é‡è½½ï¼‰æ—¶è§¦å‘ ([Playwright ä¸­æ–‡ç½‘][2])                                |
| `load`             | â€”                    | å½“æµè§ˆå™¨è§¦å‘ `window.load` äº‹ä»¶ï¼ˆæ‰€æœ‰èµ„æºåŠ è½½å®Œæˆï¼‰æ—¶è§¦å‘ ([Playwright][1])                            |
| `domcontentloaded` | â€”                    | å½“ DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼ˆæ–‡æ¡£åŸºæœ¬ç»“æ„è§£æå®Œæˆï¼‰è§¦å‘ ([Playwright][1])                          |
| `pageerror`        | é”™è¯¯å¯¹è±¡ / JavaScript å¼‚å¸¸ | å½“é¡µé¢å†…éƒ¨ JavaScript æŠ›å‡ºæœªæ•è·å¼‚å¸¸æ—¶è§¦å‘ ([Playwright ä¸­æ–‡ç½‘][2])                                 |
| `popup`            | `Page`               | å½“é¡µé¢æ‰“å¼€æ–°çš„å­é¡µé¢ / å¼¹å‡ºçª—å£ï¼ˆ`window.open` ç­‰ï¼‰æ—¶è§¦å‘ ([Playwright ä¸­æ–‡ç½‘][2])                       |
| `request`          | `Request`            | å½“é¡µé¢å‘èµ·ç½‘ç»œè¯·æ±‚æ—¶è§¦å‘ ([Playwright][1])                                                    |
| `response`         | `Response`           | å½“æŸä¸ªè¯·æ±‚æ”¶åˆ°å“åº”å¤´ / çŠ¶æ€æ—¶è§¦å‘ ([Playwright][3])                                              |
| `requestfinished`  | `Request`            | å½“è¯·æ±‚å®Œæˆï¼ˆåŒ…æ‹¬å“åº”ä½“ä¸‹è½½å®Œæ¯•ï¼‰æ—¶è§¦å‘ ([Playwright][3])                                             |
| `requestfailed`    | `Request`            | å½“è¯·æ±‚åœ¨ä¸­é—´æŸç¯èŠ‚å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ã€è¶…æ—¶ç­‰ï¼‰æ—¶è§¦å‘ ([Playwright][3])                                        |
| `websocket`        | `WebSocket`          | å½“é¡µé¢å‘èµ· WebSocket è¯·æ±‚ / è¿æ¥æ—¶è§¦å‘ï¼ˆå¦‚æœé¡µé¢ä½¿ç”¨ WebSocketï¼‰ ([Playwright ä¸­æ–‡ç½‘][2])                |
| `worker`           | `Worker`             | å½“é¡µé¢åˆ›å»ºæ–°çš„ä¸“ç”¨ Web Worker ï¼ˆDedicated Workerï¼‰æ—¶è§¦å‘ ([Playwright ä¸­æ–‡ç½‘][2])                  |

> âœ… æ³¨æ„ï¼šè¿™äº›æ˜¯ `Page` å¯¹è±¡å¸¸è§æ”¯æŒçš„äº‹ä»¶ï¼Œä¸æ’é™¤æŸäº›äº‹ä»¶åœ¨ 1.52 ç‰ˆæœ¬ä¸­å°šæœªå¼•å…¥æˆ–å·²åšå…¼å®¹æ€§å˜åŠ¨ã€‚å»ºè®®åœ¨ä½ å®‰è£…çš„ç‰ˆæœ¬ä¸Šé€šè¿‡ `help(Page)` æˆ–é˜…è¯»å¯¹åº”ç‰ˆæœ¬æ–‡æ¡£ç¡®è®¤ã€‚

---

## æ¯ä¸ªäº‹ä»¶çš„ç¤ºä¾‹ä»£ç 

ä¸‹é¢æ˜¯è¿™äº›äº‹ä»¶çš„ä½¿ç”¨ç¤ºä¾‹ï¼ˆä»¥åŒæ­¥ API ä¸ºä¾‹ï¼Œå¼‚æ­¥ API ç”¨æ³•ç±»ä¼¼ä½†åŠ  `await`ï¼‰ï¼š

```python
from playwright.sync_api import sync_playwright

def demo():
    with sync_playwright() as p:
        browser = p.chromium.launch(headless=False)
        context = browser.new_context(accept_downloads=True)  # å¯¹äº download äº‹ä»¶å¯èƒ½éœ€è¦ accept_downloads=True
        page = context.new_page()

        # close
        page.on("close", lambda pg: print("é¡µé¢è¢«å…³é—­"))

        # console
        def on_console(msg):
            print(f"Console: type={msg.type}, text={msg.text}")
        page.on("console", on_console)

        # crash
        page.on("crash", lambda: print("é¡µé¢å´©æºƒ"))

        # dialog
        def on_dialog(dialog):
            print(f"Dialog: {dialog.message}")
            dialog.accept()  # æˆ– dismiss()
        page.on("dialog", on_dialog)

        # filechooser
        page.on("filechooser", lambda fc: fc.set_files(["/path/to/file.txt"]))

        # frameattached / framedetached / framenavigated
        page.on("frameattached", lambda fr: print("frame é™„åŠ :", fr.url))
        page.on("framedetached", lambda fr: print("frame åˆ†ç¦»:", fr.url))
        page.on("framenavigated", lambda fr: print("frame å¯¼èˆªè‡³:", fr.url))

        # load & domcontentloaded
        page.on("load", lambda: print("é¡µé¢å®Œå…¨åŠ è½½(load)"))
        page.on("domcontentloaded", lambda: print("DOMContentLoaded è§¦å‘"))

        # pageerror
        page.on("pageerror", lambda err: print("é¡µé¢ JS é”™è¯¯:", err))

        # popup
        page.on("popup", lambda new_page: print("å¼¹å‡ºçª—å£æ‰“å¼€:", new_page.url))

        # è¯·æ±‚ / å“åº” / å®Œæˆ / å¤±è´¥
        page.on("request", lambda req: print("å‘èµ·è¯·æ±‚:", req.method, req.url))
        page.on("response", lambda resp: print("æ”¶åˆ°å“åº”:", resp.status, resp.url))
        page.on("requestfinished", lambda req: print("è¯·æ±‚å®Œæˆ:", req.url))
        page.on("requestfailed", lambda req: print("è¯·æ±‚å¤±è´¥:", req.url, req.failure))

        # websocket
        page.on("websocket", lambda ws: print("WebSocket æ‰“å¼€:", ws.url))

        # worker
        page.on("worker", lambda w: print("Worker å¯åŠ¨:", w.url))

        # è®¿é—®ä¸€ä¸ªæµ‹è¯•é¡µé¢
        page.goto("https://example.com")

        # ä¸ºæ¼”ç¤ºï¼Œè§¦å‘ä¸€ä¸ª popup
        page.evaluate("window.open('https://example.org', '_blank')")

        # ç­‰å¾…ä¸€æ®µæ—¶é—´ä»¥ä¾¿è§‚å¯Ÿè¾“å‡º
        page.wait_for_timeout(3000)

        browser.close()

if __name__ == "__main__":
    demo()
```

åœ¨å¼‚æ­¥ç‰ˆï¼ˆ`async_playwright`ï¼‰ä¸­ï¼Œä½ å¯ä»¥æŠŠ `page.on(...)` æ”¾åœ¨ `await context.new_page()` ä¹‹åï¼Œç”¨ `async` å›è°ƒæˆ–æ™®é€šå‡½æ•°éƒ½å¯ä»¥ï¼ˆPlaywright ä¼šè‡ªåŠ¨å¤„ç†å›è°ƒæ˜¯åç¨‹è¿˜æ˜¯æ™®é€šå‡½æ•°ï¼‰ã€‚

---


[1]: https://playwright.dev/python/docs/api/class-page?utm_source=chatgpt.com "Page | Playwright Python"
[2]: https://playwright.bootcss.com/python/docs/api/class-page?utm_source=chatgpt.com "Page - Playwright"
[3]: https://playwright.dev/python/docs/api/class-request?utm_source=chatgpt.com "Request | Playwright Python"
